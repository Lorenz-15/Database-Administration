/*!
 * Engagement Insights JS SDK, 1.0.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * Licensed under the ISC License.
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.MSEI=n.MSEI||{})}(this,function(n){"use strict";var e="function",o="object",t="undefined",u="prototype",a="hasOwnProperty";function i(){return typeof globalThis!==t&&globalThis?globalThis:typeof self!==t&&self?self:typeof window!==t&&window?window:typeof global!==t&&global?global:null}function r(n){var t=Object.create;if(t)return t(n);if(null==n)return{};var i=typeof n;if(i!==o&&i!==e)throw new TypeError("Object prototype may only be an Object:"+n);function r(){}return r[u]=n,new r}function c(n){for(var t,i=1,r=arguments.length;i<r;i++)for(var e in t=arguments[i])Object[u][a].call(t,e)&&(n[e]=t[e]);return n}var f=function(n,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t[a](i)&&(n[i]=t[i])})(n,t)};var s,l,v=i()||{};l=function(n,t){function i(){this.constructor=n}f(n,t),n[u]=null===t?r(t):(i[u]=t[u],new i)},(s=v).__assign||(s.__assign=Object.assign||c),s.__extends||(s.__extends=l),__assign=__assign||v.__assign,__extends=__extends||v.__extends;var L=0,U=1,h=2,d=3,z=4,K=5,p=t,m=o,y="window",w="document",g="navigator",S="location",b="console",C="JSON",T=i;function V(n){var t=T();return t&&t[n]?t[n]:n===y&&_()?window:null}function _(){return Boolean(typeof window===m&&window)}function E(){return _()?window:V(y)}function I(){return Boolean(typeof document===m&&document)?document:V(w)}function x(){return Boolean(typeof navigator===m&&navigator)}function q(){return x()?navigator:V(g)}function H(){return typeof location===m&&location?location:V(S)}function P(){return Boolean(typeof JSON===m&&JSON||null!==V(C))}var M="attachEvent",A="addEventListener",k="detachEvent",F="removeEventListener",O=4294967296,B=4294967295,R=null,D=!1,N=123456789,j=987654321;function J(n){n<0&&(n>>>=0),N=123456789+n&B,j=987654321-n&B,D=!0}function W(){J(Math.random()*O^(new Date).getTime())}function X(n,t){return typeof n===t}function G(n){return X(n,t)||void 0===n}function Q(n){return G(n)||null===n}function Z(n,t){return n&&Object[u].hasOwnProperty.call(n,t)}function $(n){return X(n,o)}function Y(n){return X(n,e)}function nn(n,t,i,r){void 0===r&&(r=!1);var e=!1;if(!Q(n))try{Q(n[A])?Q(n[M])||(n[M]("on"+t,i),e=!0):(n[A](t,i,r),e=!0)}catch(n){}return e}function tn(n,t,i,r){if(void 0===r&&(r=!1),!Q(n))try{Q(n[F])?Q(n[k])||n[k]("on"+t,i):n[F](t,i,r)}catch(n){}}function rn(n,t,i,r){var e=Object.defineProperty;if(e)try{var o={enumerable:!0,configurable:!0};return i&&(o.get=i),r&&(o.set=r),e(n,t,o),!0}catch(n){}return!1}function en(n,t){if(n&&$(n))for(var i in n)Z(n,i)&&t.call(n,i,n[i])}var on=(un.isDate=function(n){return"[object Date]"===Object[u].toString.call(n)},un.isArray=function(n){return"[object Array]"===Object[u].toString.call(n)},un.isError=function(n){return"[object Error]"===Object[u].toString.call(n)},un.isString=function(n){return X(n,"string")},un.isNumber=function(n){return X(n,"number")},un.isBoolean=function(n){return X(n,"boolean")},un.disableCookies=function(){un.r=!1},un.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(fn,function(n){var t=0|un.randomValue(15);return("x"===n?t:3&t|8).toString(16)})},un.toISOString=function(n){if(un.isDate(n)){var t=function(n){var t=String(n);return 1===t.length&&(t="0"+t),t};return n.getUTCFullYear()+"-"+t(n.getUTCMonth()+1)+"-"+t(n.getUTCDate())+"T"+t(n.getUTCHours())+":"+t(n.getUTCMinutes())+":"+t(n.getUTCSeconds())+"."+String((n.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},un.arrForEach=function(n,t,i){for(var r=n.length,e=0;e<r;e++)e in n&&t.call(i||n,n[e],e,n)},un.arrIndexOf=function(n,t,i){for(var r=n.length,e=i||0,o=Math.max(0<=e?e:r-Math.abs(e),0);o<r;o++)if(o in n&&n[o]===t)return o;return-1},un.arrMap=function(n,t,i){for(var r=n.length,e=i||n,o=new Array(r),u=0;u<r;u++)u in n&&(o[u]=t.call(e,n[u],n));return o},un.arrReduce=function(n,t,i){var r,e=n.length,o=0;if(3<=arguments.length)r=i;else{for(;o<e&&!(o in n);)o++;r=n[o++]}for(;o<e;)o in n&&(r=t(r,n[o],o,n)),o++;return r},un.strTrim=function(n){return un.isString(n)?n.replace(/^\s+|\s+$/g,""):n},un.objKeys=function(n){var t=!{toString:null}.propertyIsEnumerable("toString");if(!(Y(n)||$(n)&&null!==n))throw new TypeError("objKeys called on non-object");var i=[];for(var r in n)Z(n,r)&&i.push(r);if(t)for(var e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=e.length,u=0;u<o;u++)Z(n,e[u])&&i.push(e[u]);return i},un.addEventHandler=function(n,t){var i=!1,r=E();r&&(i=nn(r,n,t),i=nn(r.body,n,t)||i);var e=I();return e&&(i=sn.Attach(e,n,t)||i),i},un.dateNow=function(){var n=Date;return n.now?n.now():(new n).getTime()},un.perfNow=function(){var n=V("performance");return n&&n.now?n.now():un.dateNow()},un.newId=function(n){void 0===n&&(n=22);for(var t=un.random32()>>>0,i=0,r="";r.length<n;)i++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===i&&(t=(un.random32()<<2&4294967295|3&t)>>>0,i=0);return r},un.isIE=function(){var n;return null===R&&(n=((q()||{}).userAgent||"").toLowerCase(),R=-1!==n.indexOf("msie")||-1!==n.indexOf("trident/")),R},un.randomValue=function(n){return 0<n?Math.floor(un.random32()/B*(n+1))>>>0:0},un.random32=function(n){var t=V("crypto")||V("msCrypto"),i=t&&t.getRandomValues?t.getRandomValues(new Uint32Array(1))[0]&B:un.isIE()?(D||W(),un.mwcRandom32()&B):Math.floor(O*Math.random()|0);return n||(i>>>=0),i},un.mwcRandomSeed=function(n){n?J(n):W()},un.mwcRandom32=function(n){var t=((j=36969*(65535&j)+(j>>16)&B)<<16)+(65535&(N=18e3*(65535&N)+(N>>16)&B))>>>0&B|0;return n||(t>>>=0),t},un.generateW3CId=function(){for(var n,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i="",r=0;r<4;r++)i+=t[15&(n=un.random32())]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var e=t[8+(3&un.random32())|0];return i.substr(0,8)+i.substr(9,4)+"4"+i.substr(13,3)+e+i.substr(16,3)+i.substr(19,12)},un.isTypeof=X,un.isUndefined=G,un.isNullOrUndefined=Q,un.hasOwnProperty=Z,un.isFunction=Y,un.isObject=$,un.objCreate=r,un.objDefineAccessors=rn,un);function un(){}var an,cn,fn=/[xy]/g,sn=(ln.Attach=nn,ln.AttachEvent=nn,ln.Detach=tn,ln.DetachEvent=tn,ln);function ln(){}(cn=an=an||{})[cn.CRITICAL=1]="CRITICAL",cn[cn.WARNING=2]="WARNING";var vn={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},hn="constructor",dn="prototype",pn="function",mn="_dynInstFuncs",yn="_isDynProxy",wn="_dynClass",gn="_dynCls$",Sn="_dynInstChk",bn=Sn,Cn="_dfOpts",Tn="_unknown_",_n="__proto__",En="useBaseInst",In="setInstFuncs",xn=Object,Pn=xn.getPrototypeOf,Mn=0;function An(n,t){return n&&xn[dn].hasOwnProperty.call(n,t)}function kn(n){return n&&(n===xn[dn]||n===Array[dn])}function Fn(n){return kn(n)||n===Function[dn]}function On(n){if(n){if(Pn)return Pn(n);var t=n[_n]||n[dn]||n[hn];if(t)return t}return null}function Bn(n,t){var i=[],r=xn.getOwnPropertyNames;if(r)i=r(n);else for(var e in n)"string"==typeof e&&An(n,e)&&i.push(e);if(i&&0<i.length)for(var o=0;o<i.length;o++)t(i[o])}function Rn(n,t,i){return t!==hn&&typeof n[t]===pn&&(i||An(n,t))}function Dn(n){throw new TypeError("DynamicProto: "+n)}function Nn(n,t){for(var i=n.length-1;0<=i;i--)if(n[i]===t)return 1}function jn(t,n,i,r,e){function o(e,o){var u=function(){var n,t,i,r;return(function(n,t,i,r){var e=null;if(n&&An(i,wn)){var o=n[mn]||{};if((e=(o[i[wn]]||{})[t])||Dn("Missing ["+t+"] "+pn),!e[Sn]&&!1!==o[bn]){for(var u=!An(n,t),a=On(n),c=[];u&&a&&!Fn(a)&&!Nn(c,a);){var f=a[t];if(f){u=f===r;break}c.push(a),a=On(a)}try{u&&(n[t]=e),e[Sn]=1}catch(n){o[bn]=!1}}}return e}(this,o,e,u)||(i=u,(r=(t=e)[n=o])===i&&(r=On(t)[n]),typeof r!==pn&&Dn("["+n+"] is not a "+pn),r)).apply(this,arguments)};return u[yn]=1,u}var u,a;kn(t)||(u=i[mn]=i[mn]||{},a=u[n]=u[n]||{},!1!==u[bn]&&(u[bn]=!!e),Bn(i,function(n){Rn(i,n,!1)&&i[n]!==r[n]&&(a[n]=i[n],delete i[n],An(t,n)&&(!t[n]||t[n][yn])||(t[n]=o(t,n)))}))}function Ln(n,t){return An(n,dn)?n.name||t||Tn:((n||{})[hn]||{}).name||t||Tn}function Un(n,t,i,r){An(n,dn)||Dn("theClass is an invalid class definition.");var e=n[dn];!function(n,t){for(var i=On(t);i&&!Fn(i);){if(i===n)return 1;i=On(i)}}(e,t)&&Dn("["+Ln(n)+"] is not in class hierarchy of ["+Ln(t)+"]");var o=null;An(e,wn)?o=e[wn]:(o=gn+Ln(n,"_")+"$"+Mn,Mn++,e[wn]=o);var u=Un[Cn],a=!!u[En];a&&r&&void 0!==r[En]&&(a=!!r[En]);var c,f,s=(f={},Bn(c=t,function(n){!f[n]&&Rn(c,n,!1)&&(f[n]=c[n])}),f);i(t,function(n,t,i,o){function r(n,t,i){var r,e=t[i];return e[yn]&&o&&(!1!==(r=n[mn]||{})[bn]&&(e=(r[t[wn]]||{})[i]||e)),function(){return e.apply(n,arguments)}}var e={};Bn(i,function(n){e[n]=r(t,i,n)});for(var u=On(n),a=[];u&&!Fn(u)&&!Nn(a,u);)Bn(u,function(n){!e[n]&&Rn(u,n,!Pn)&&(e[n]=r(t,u,n))}),a.push(u),u=On(u);return e}(e,t,s,a));var l=!!Pn&&!!u[In];l&&r&&(l=!!r[In]),jn(e,o,t,s,!1!==l)}Un[Cn]={setInstFuncs:!0,useBaseInst:!0};function zn(n){return n?'"'+n.replace(/\"/g,"")+'"':""}var Kn=(Vn.dataType="MessageData",Vn);function Vn(n,t,i,r){void 0===i&&(i=!1);this.messageId=n,this.message=(i?"AI: ":"AI (Internal): ")+n;var e="";P()&&(e=(P()?JSON||V(C):null).stringify(r));var o=(t?" message:"+zn(t):"")+(r?" props:"+zn(e):"");this.message+=o}var qn=(Hn.prototype.enableDebugExceptions=function(){return!1},Hn.prototype.consoleLoggingLevel=function(){return 0},Hn.prototype.telemetryLoggingLevel=function(){return 1},Hn.prototype.maxInternalMessageLimit=function(){return 25},Hn.prototype.throwInternal=function(n,t,i,r,e){void 0===e&&(e=!1)},Hn.prototype.warnToConsole=function(n){},Hn.prototype.resetInternalMessageCount=function(){},Hn.prototype.logInternalMessage=function(n,t){},Hn);function Hn(o){this.identifier="DiagnosticLogger",this.queue=[];var u=0,f={};Un(Hn,this,function(a){var r=on.isNullOrUndefined,c=on.isUndefined,e=on.isFunction;function n(n,t){var i=o[n];return r(i)?t:i}r(o)&&(o={}),a.consoleLoggingLevel=function(){return n("loggingLevelConsole",0)},a.telemetryLoggingLevel=function(){return n("loggingLevelTelemetry",1)},a.maxInternalMessageLimit=function(){return n("maxMessageLimit",25)},a.enableDebugExceptions=function(){return n("enableDebugExceptions",!1)},a.throwInternal=function(n,t,i,r,e){void 0===e&&(e=!1);var o,u=new Kn(t,i,e,r);if(a.enableDebugExceptions())throw u;!c(u)&&u&&(c(u.message)||(e?(o=+u.messageId,!f[o]&&a.consoleLoggingLevel()>=an.WARNING&&(a.warnToConsole(u.message),f[o]=!0)):a.consoleLoggingLevel()>=an.WARNING&&a.warnToConsole(u.message),a.logInternalMessage(n,u)))},a.warnToConsole=function(n){var t,i=typeof console!==p?console:V(b);i&&(t="log",i.warn&&(t="warn"),e(i[t])&&i[t](n))},a.resetInternalMessageCount=function(){u=0,f={}},a.logInternalMessage=function(n,t){var i,r,e,o;u>=a.maxInternalMessageLimit()||(i=!0,r="AITR_"+t.messageId,f[r]?i=!1:f[r]=!0,i&&(n<=a.telemetryLoggingLevel()&&(a.queue.push(t),u++),u===a.maxInternalMessageLimit()&&(o=new Kn(vn.MessageLimitPerPVExceeded,e="Internal events throttle limit per PageView reached for this app.",!1),a.queue.push(o),a.warnToConsole(e))))}})}var Jn=(Wn.ParentContextKey="parent",Wn.ChildrenContextKey="childEvts",Wn);function Wn(n,e,t){var i,o=this,u=!1;o.start=on.dateNow(),o.name=n,o.isAsync=t,o.isChildEvt=function(){return!1},on.isFunction(e)&&(u=on.objDefineAccessors(o,"payload",function(){return!i&&on.isFunction(e)&&(i=e(),e=null),i})),o.getCtx=function(n){return n?n===Wn.ParentContextKey||n===Wn.ChildrenContextKey?o[n]:(o.ctx||{})[n]:null},o.setCtx=function(n,t){n&&(n===Wn.ParentContextKey?(o[n]||(o.isChildEvt=function(){return!0}),o[n]=t):n===Wn.ChildrenContextKey?o[n]=t:(o.ctx=o.ctx||{})[n]=t)},o.complete=function(){var n=0,t=o.getCtx(Wn.ChildrenContextKey);if(on.isArray(t))for(var i=0;i<t.length;i++){var r=t[i];r&&(n+=r.time)}o.time=on.dateNow()-o.start,o.exTime=o.time-n,o.complete=function(){},!u&&on.isFunction(e)&&(o.payload=e())}}var Xn=(Gn.prototype.create=function(n,t,i){return null},Gn.prototype.fire=function(n){},Gn.prototype.setCtx=function(n,t){},Gn.prototype.getCtx=function(n){},Gn);function Gn(t){this.ctx={},Un(Gn,this,function(i){i.create=function(n,t,i){return new Jn(n,t,i)},i.fire=function(n){n&&(n.complete(),t&&t.perfEvent(n))},i.setCtx=function(n,t){n&&((i.ctx=i.ctx||{})[n]=t)},i.getCtx=function(n){return(i.ctx||{})[n]}})}var Qn="CoreUtils.doPerf";function Zn(n,t,i,r,e){if(n){var o=n;if(o&&on.isFunction(o.getPerfMgr)&&(o=o.getPerfMgr()),o){var u,a=void 0,c=o.getCtx(Qn);try{if(a=o.create(t(),r,e))return c&&a.setCtx&&(a.setCtx(Jn.ParentContextKey,c),c.getCtx&&c.setCtx&&((u=c.getCtx(Jn.ChildrenContextKey))||(u=[],c.setCtx(Jn.ChildrenContextKey,u)),u.push(a))),o.setCtx(Qn,a),i(a)}catch(n){a&&a.setCtx&&a.setCtx("exception",n)}finally{a&&o.fire(a),o.setCtx(Qn,c)}}}return i()}var $n=on.isFunction,Yn=function(e,t){var o=this,u=null,a=$n(e.processTelemetry),c=$n(e.setNextPlugin);o.o=!1,o.getPlugin=function(){return e},o.getNext=function(){return u},o.setNext=function(n){u=n},o.processTelemetry=function(i,r){r=r||t;var n=e?e.identifier:"TelemetryPluginChain";Zn(r?r.core():null,function(){return n+":processTelemetry"},function(){if(e&&a){o.o=!0;try{r.setNext(u),c&&e.setNextPlugin(u),u&&(u.o=!1),e.processTelemetry(i,r)}catch(n){var t=u&&u.o;u&&t||r.diagLog().throwInternal(an.CRITICAL,vn.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+n),u&&!t&&u.processTelemetry(i,r)}}else u&&(o.o=!0,u.processTelemetry(i,r))},function(){return{item:i}},!i.sync)}},nt=on.isNullOrUndefined;function tt(n,t){var i=[];if(n&&0<n.length)for(var r=null,e=0;e<n.length;e++){var o,u=n[e];u&&on.isFunction(u.processTelemetry)&&(o=new Yn(u,t),i.push(o),r&&r.setNext(o),r=o)}return 0<i.length?i[0]:null}var it=function i(n,o,r,t){var e,u,a,c,f,s=this,l=null;null!==t&&(n&&on.isFunction(n.getPlugin)?l=function(n,t,i){var r=[],e=!i;if(n)for(;n;){var o=n.getPlugin();!e&&o!==i||(e=!0,r.push(o)),n=n.getNext()}return e||r.push(i),tt(r,t)}(n,s,t||n.getPlugin()):t?(u=s,c=e=n,f=!1,(a=t)&&e&&(c=[],on.arrForEach(e,function(n){!f&&n!==a||(f=!0,c.push(n))})),a&&!f&&(c=c||[]).push(a),l=tt(c,u)):on.isUndefined(t)&&(l=tt(n,s))),s.core=function(){return r},s.diagLog=function(){return(r||{}).logger||new qn(o||{})},s.getCfg=function(){return o},s.getExtCfg=function(n,t){var i,r;return void 0===t&&(t={}),!o||(r=o.extensionConfig)&&n&&(i=r[n]),i||t},s.getConfig=function(n,t,i){var r;void 0===i&&(i=!1);var e=s.getExtCfg(n,null);return e&&!nt(e[t])?r=e[t]:o&&!nt(o[t])&&(r=o[t]),nt(r)?i:r},s.hasNext=function(){return null!=l},s.getNext=function(){return l},s.setNext=function(n){l=n},s.processNext=function(n){var t=l;t&&(l=t.getNext(),t.processTelemetry(n,s))},s.createNew=function(n,t){return void 0===n&&(n=null),new i(n||l,o,r,t)}},rt=on.isFunction,et="getPlugin",ot=(ut.prototype.initialize=function(n,t,i,r){this.u(n,t,i,r)},ut);function ut(){var o=this,u=!1,a=null,c=null;o.core=null,o.diagLog=function(n){return o.l(n).diagLog()},o.isInitialized=function(){return u},o.setInitialized=function(n){u=n},o.setNextPlugin=function(n){c=n},o.processNext=function(n,t){t?t.processNext(n):c&&rt(c.processTelemetry)&&c.processTelemetry(n,null)},o.l=function(n){void 0===n&&(n=null);var t,i=n;return i||(t=a||new it(null,{},o.core),i=c&&c[et]?t.createNew(null,c[et]):t.createNew(null,c)),i},o.u=function(n,t,i,r){n&&(n.extensionConfig=n.extensionConfig||[]),!r&&t&&(r=t.getProcessTelContext().getNext());var e=c;c&&c[et]&&(e=c[et]()),o.core=t,a=new it(r,n,t,e),u=!0}}var at=on.isFunction,ct="processTelemetry",ft="priority",st="setNextPlugin",lt="isInitialized";function vt(t,i){for(var n=[],r=null,e=t.getNext();e;){var o=e.getPlugin();o&&(r&&at(r[st])&&at(o[ct])&&r[st](o),at(o[lt])&&o[lt]()||n.push(o),r=o,e=e.getNext())}on.arrForEach(n,function(n){n.initialize(t.getCfg(),t.core(),i,t.getNext())})}function ht(n){return n.sort(function(n,t){var i=0,r=at(t[ct]);return at(n[ct])?i=r?n[ft]-t[ft]:1:r&&(i=-1),i})}var dt,pt=on.objDefineAccessors,mt=(dt=ot,__extends(yt,dt),yt.prototype.processTelemetry=function(n,t){},yt.prototype.getChannelControls=function(){return null},yt.prototype.initialize=function(n,t,i){},yt.v=(pt(yt.prototype,"ChannelControls",yt.prototype.getChannelControls),void pt(yt.prototype,"channelQueue",yt.prototype.getChannelControls)),yt);function yt(){var r=dt.call(this)||this;r.identifier="ChannelControllerPlugin",r.priority=500;var o,u=on.arrForEach;function a(n){n&&0<n.length&&(n=n.sort(function(n,t){return n.priority-t.priority}),u(n,function(n){if(n.priority<500)throw Error("Channel has invalid priority"+n.identifier)}),o.push(n))}return Un(yt,r,function(n,e){n.setNextPlugin=function(n){},n.processTelemetry=function(t,i){o&&u(o,function(n){0<n.length&&r.l(i).createNew(n).processNext(t)})},n.getChannelControls=function(){return o},n.initialize=function(t,i,r){n.isInitialized()||(e.initialize(t,i,r),t.isCookieUseDisabled&&on.disableCookies(),function(n,t){o=[],n&&u(n,a);{var i;t&&(i=[],u(t,function(n){500<n.priority&&i.push(n)}),a(i))}}((t||{}).channels,r),u(o,function(n){return vt(new it(n,t,i),r)}))}}),r}var wt=on.arrForEach,gt=on.isNullOrUndefined,St="_notificationManager",bt=(Ct.prototype.initialize=function(n,t,i,r){},Ct.prototype.getTransmissionControls=function(){return null},Ct.prototype.track=function(n){},Ct.prototype.getProcessTelContext=function(){return null},Ct.prototype.getNotifyMgr=function(){return null},Ct.prototype.getPerfMgr=function(){return null},Ct.prototype.setPerfMgr=function(n){},Ct.prototype.eventCnt=function(){return 0},Ct.prototype.releaseQueue=function(){},Ct);function Ct(){var t,c,f,i,s=!1;Un(Ct,this,function(a){a.d=new Array,c=new mt,a.logger=on.objCreate({throwInternal:function(n,t,i,r,e){void 0===e&&(e=!1)},warnToConsole:function(n){},resetInternalMessageCount:function(){}}),t=[],a.isInitialized=function(){return s},a.initialize=function(n,t,r,i){if(a.isInitialized())throw Error("Core should not be initialized more than once");if(!n||gt(n.instrumentationKey))throw Error("Please provide instrumentation key");f=i,a[St]=i,a.config=n||{},n.extensions=gt(n.extensions)?[]:n.extensions,(n.extensionConfig=gt(n.extensionConfig)?{}:n.extensionConfig).NotificationManager=i,r&&(a.logger=r);var e=[];e.push.apply(e,t.concat(n.extensions)),e=ht(e);var o=[],u={};if(wt(e,function(n){if(gt(n)||gt(n.initialize))throw Error("Extensions must provide callback to initialize");var t=n.priority,i=n.identifier;n&&t&&(gt(u[t])?u[t]=i:r.warnToConsole("Two extensions have same priority #"+t+" - "+u[t]+", "+i)),(!t||t<c.priority)&&o.push(n)}),e.push(c),o.push(c),e=ht(e),a.d=e,vt(new it([c],n,a),e),vt(new it(o,n,a),e),a.d=o,0===a.getTransmissionControls().length)throw new Error("No channels available");s=!0,a.releaseQueue()},a.getTransmissionControls=function(){return c.getChannelControls()},a.track=function(n){n.iKey||(n.iKey=a.config.instrumentationKey),n.time||(n.time=on.toISOString(new Date)),gt(n.ver)&&(n.ver="4.0"),a.isInitialized()?a.getProcessTelContext().processNext(n):t.push(n)},a.getProcessTelContext=function(){var n=a.d,t=n;return n&&0!==n.length||(t=[c]),new it(t,a.config,a)},a.getNotifyMgr=function(){return f||(f=on.objCreate({addNotificationListener:function(n){},removeNotificationListener:function(n){},eventsSent:function(n){},eventsDiscarded:function(n,t){},eventsSendRequest:function(n,t){}}),a[St]=f),f},a.getPerfMgr=function(){return i||a.config&&a.config.enablePerfMgr&&(i=new Xn(a.getNotifyMgr())),i},a.setPerfMgr=function(n){i=n},a.eventCnt=function(){return t.length},a.releaseQueue=function(){0<t.length&&(wt(t,function(n){a.getProcessTelContext().processNext(n)}),t=[])}})}var Tt=(_t.prototype.addNotificationListener=function(n){},_t.prototype.removeNotificationListener=function(n){},_t.prototype.eventsSent=function(n){},_t.prototype.eventsDiscarded=function(n,t){},_t.prototype.eventsSendRequest=function(n,t){},_t);function _t(n){this.listeners=[];var e=on.arrForEach,i=!!(n||{}).perfEvtsSendAll;Un(_t,this,function(r){r.addNotificationListener=function(n){r.listeners.push(n)},r.removeNotificationListener=function(n){for(var t=on.arrIndexOf(r.listeners,n);-1<t;)r.listeners.splice(t,1),t=on.arrIndexOf(r.listeners,n)},r.eventsSent=function(t){e(r.listeners,function(n){n&&n.eventsSent&&setTimeout(function(){return n.eventsSent(t)},0)})},r.eventsDiscarded=function(t,i){e(r.listeners,function(n){n&&n.eventsDiscarded&&setTimeout(function(){return n.eventsDiscarded(t,i)},0)})},r.eventsSendRequest=function(t,i){e(r.listeners,function(n){if(n&&n.eventsSendRequest)if(i)setTimeout(function(){return n.eventsSendRequest(t,i)},0);else try{n.eventsSendRequest(t,i)}catch(n){}})},r.perfEvent=function(t){t&&(!i&&t.isChildEvt()||e(r.listeners,function(n){if(n&&n.perfEvent)if(t.isAsync)setTimeout(function(){return n.perfEvent(t)},0);else try{n.perfEvent(t)}catch(n){}}))}})}var Et,It=(Et=bt,__extends(xt,Et),xt.prototype.initialize=function(n,t,i,r){},xt.prototype.track=function(n){},xt.prototype.addNotificationListener=function(n){},xt.prototype.removeNotificationListener=function(n){},xt.prototype.pollInternalLogs=function(n){return 0},xt);function xt(){var n=Et.call(this)||this;return Un(xt,n,function(r,e){function t(n){var t=r.getNotifyMgr();t&&t.eventsDiscarded([n],h)}r.initialize=function(n,t,i,r){e.initialize(n,t,i||new qn(n),r||new Tt(n))},r.track=function(n){Zn(r.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){if(null===n)throw t(n),Error("Invalid telemetry item");!function(n){if(on.isNullOrUndefined(n.name))throw t(n),Error("telemetry name required")}(n),e.track(n)},function(){return{item:n}},!n.sync)},r.addNotificationListener=function(n){var t=r.getNotifyMgr();t&&t.addNotificationListener(n)},r.removeNotificationListener=function(n){var t=r.getNotifyMgr();t&&t.removeNotificationListener(n)},r.pollInternalLogs=function(i){var n=r.config.diagnosticLogInterval;return n&&0<n||(n=1e4),setInterval(function(){var n=r.logger?r.logger.queue:[];on.arrForEach(n,function(n){var t={name:i||"InternalMessageId: "+n.messageId,iKey:r.config.instrumentationKey,time:on.toISOString(new Date),baseType:Kn.dataType,baseData:{message:n.message}};r.track(t)}),n.length=0},n)}}),n}var Pt,Mt,At={NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32},kt=1,Ft=2,Ot=3,Bt={Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9},Rt=__assign(__assign({},vn),{AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519}),Dt="1DS-Web-JS-3.0.2",Nt=((Pt={})[0]=Bt.Unspecified,Pt[2]=Bt.Double,Pt[1]=Bt.String,Pt[3]=Bt.Bool,Pt[4098]=Bt.Double,Pt[4097]=Bt.String,Pt[4099]=Bt.Bool,Pt),jt=null,Lt=on.isUndefined,Ut=on.isNullOrUndefined,zt=on.hasOwnProperty,Kt=null,Vt=on.arrForEach,qt=on.objKeys,Ht=function(){var n=q();return!(!n||!n.product)&&"ReactNative"===n.product},Jt=on.isString,Wt=on.isNumber,Xt=on.isBoolean,Gt=on.isFunction,Qt=on.isArray,Zt=on.isObject,$t=on.strTrim,Yt=Boolean(I()),ni=Boolean(E());function ti(n){return!Ut(n)&&""!==n}function ii(){return null===Kt&&(Kt=x()&&Boolean(q().sendBeacon)),Kt}function ri(n,t,i){if(!Jt(n)||Ut(t)||""===t)return null;if(Jt(t)||Wt(t)||Xt(t)||Qt(t))t={value:t};else if("object"!=typeof t||t.hasOwnProperty("value")){if(Ut(t.value)||""===t.value||!Jt(t.value)&&!Wt(t.value)&&!Xt(t.value)&&!Qt(t.value))return null}else t={value:i?JSON.stringify(t):t};if(Qt(t.value)&&!(0<t.value.length))return null;if(!Ut(t.kind)){if(Qt(t.value)||!function(n){if(Wt(n)&&(n>=At.NotSet&&n<=At.Pii_IPV4AddressLegacy||n===At.CustomerContent_GenericContent))return 1;return}(t.kind))return null;t.value=t.value.toString()}return t}function ei(n,t,i){var r,e=-1;return Lt(n)||(0<t&&(32===t?e=8192:t<=13&&(e=t<<5)),!function(n){if(Wt(n)&&0<=n&&n<=9)return 1;return}(i)?(r=Nt[function n(t){var i=0;{var r;null!=t&&("string"==(r=typeof t)?i=1:"number"==r?i=2:"boolean"==r?i=3:r===o&&(i=4,Qt(t)?(i=4096,0<t.length&&(i|=n(t[0]))):zt(t,"value")&&(i=8192|n(t.value))))}return i}(n)]||-1,-1!==e&&-1!==r?e|=r:r===Bt.Double&&(e=r)):(-1===e&&(e=0),e|=i)),e}function oi(){if(void 0===Mt){Mt=!1;try{var n=I(),t=q();n&&!Lt(n.cookie)&&t&&t.cookieEnabled&&(Mt=!0)}catch(n){}}return Mt}function ui(n){return!!Jt(n)&&(-1!==n.indexOf("CPU iPhone OS 12")||-1!==n.indexOf("iPad; CPU OS 12")||(-1!==n.indexOf("Macintosh; Intel Mac OS X 10_14")&&-1!==n.indexOf("Version/")&&-1!==n.indexOf("Safari")||(-1!==n.indexOf("Macintosh; Intel Mac OS X 10_14")&&(i="AppleWebKit/605.1.15 (KHTML, like Gecko)",void 0!==(t=n)&&void 0!==i&&-1!==t.indexOf(i,t.length-i.length))||(-1!==n.indexOf("Chrome/5")||-1!==n.indexOf("Chrome/6")||(-1!==n.indexOf("UnrealEngine")&&-1===n.indexOf("Chrome")||(-1!==n.indexOf("UCBrowser/12")||-1!==n.indexOf("UCBrowser/11")))))));var t,i}function ai(n,t,i){var r,e,o,u;oi()&&(r="",(e=H())&&"https:"===e.protocol&&(r=";secure",null===jt&&(jt=ui((q()||{}).userAgent)),jt||(t+=";SameSite=None")),(o=new Date).setTime(o.getTime()+24*i*60*60*1e3),u="; expires="+o.toUTCString(),I().cookie=n+"="+t+u+"; path=/"+r)}function ci(n){void 0===n&&(n="D");var t=on.newGuid();return"B"===n?t="{"+t+"}":"P"===n?t="("+t+")":"N"===n&&(t=t.replace(/-/g,"")),t}var fi=on.perfNow;function si(n,t){var i=n;i.timings=i.timings||{},i.timings.processTelemetryStart=i.timings.processTelemetryStart||{},i.timings.processTelemetryStart[t]=fi()}var li=on.addEventHandler;var vi,hi="version",di="properties",pi=(vi=It,__extends(mi,vi),mi.prototype.initialize=function(n,t,i,r){},mi.prototype.track=function(n){},mi);function mi(){var n=vi.call(this)||this;return n.pluginVersionStringArr=[],n.pluginVersionString="",Un(mi,n,function(u,a){u.initialize=function(t,i,r,e){Zn(u,function(){return"AppInsightsCore.initialize"},function(){if(t){t.endpointUrl||(t.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var n=t.propertyStorageOverride;if(n&&(!n.getProperty||!n.setProperty))throw new Error("Invalid property storage override passed.");t.channels&&Vt(t.channels,function(n){n&&Vt(n,function(n){var t;n.identifier&&n.version&&(t=n.identifier+"="+n.version,u.pluginVersionStringArr.push(t))})})}u.getWParam=function(){return"undefined"!=typeof document?0:-1},i&&Vt(i,function(n){var t;n&&n.identifier&&n.version&&(t=n.identifier+"="+n.version,u.pluginVersionStringArr.push(t))}),u.pluginVersionString=u.pluginVersionStringArr.join(";");try{a.initialize(t,i,r,e)}catch(n){u.logger.throwInternal(an.CRITICAL,Rt.ErrorProvidedChannels,"Channels must be provided through config.channels only")}u.pollInternalLogs("InternalLog")},function(){return{config:t,extensions:i,logger:r,notificationManager:e}})},u.track=function(o){Zn(u,function(){return"AppInsightsCore.track"},function(){var n,t,i,r,e=o;e&&(e.timings=e.timings||{},e.timings.trackStart=fi(),(r=e.latency)&&Wt(r)&&1<=r&&r<=3||(e.latency=kt),(n=e.ext=e.ext||{}).sdk=n.sdk||{},n.sdk.ver=Dt,(t=e.baseData=e.baseData||{})[di]||(t[di]={}),(i=t[di])[hi]||(i[hi]=""),""!==u.pluginVersionString&&(i[hi]=u.pluginVersionString)),a.track(e)},function(){return{item:o}},!o.sync)}}),n}var yi;yi=bt,__extends(wi,yi),wi.prototype.initialize=function(n,t,i,r){},wi.prototype.track=function(n){};function wi(){var n=yi.call(this)||this;return Un(wi,n,function(e,o){e.initialize=function(n,t,i,r){n&&(n.endpointUrl||(n.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/")),e.getWParam=function(){return Yt?0:-1};try{o.initialize(n,t,i,r)}catch(n){e.logger.throwInternal(an.CRITICAL,Rt.ErrorProvidedChannels,"Channels must be provided through config.channels only")}},e.track=function(n){var t,i=n;i&&((t=i.ext=i.ext||{}).sdk=t.sdk||{},t.sdk.ver=Dt),o.track(i)}}),n}var gi=Gt;function Si(t,i,r){return function(n){t[i]=n,r()}}var bi=(Ci.resolve=function(i){return i instanceof Ci?i:i&&gi(i.then)?new Ci(function(n,t){try{i.then(n,t)}catch(n){t(n)}}):new Ci(function(n){n(i)})},Ci.reject=function(i){return new Ci(function(n,t){t(i)})},Ci.all=function(u){if(u&&u.length)return new Ci(function(n,t){try{for(var i=[],r=0,e=0;e<u.length;e++){var o=u[e];o&&gi(o.then)?(r++,o.then(Si(i,e,function(){0==--r&&n(i)}),t)):i[e]=o}0===r&&setTimeout(function(){n(i)},0)}catch(n){t(n)}})},Ci.race=function(e){return new Ci(function(i,r){if(e&&e.length)try{for(var n=function(n){var t=e[n];t&&gi(t.then)?t.then(i,r):setTimeout(function(){i(t)},0)},t=0;t<e.length;t++)n(t)}catch(n){r(n)}})},Ci.prototype.then=function(n,t){},Ci.prototype.catch=function(n){},Ci);function Ci(n){var c=0,f=null,s=[];function l(){var i;0<s.length&&(i=s.slice(),s=[],setTimeout(function(){for(var n=0,t=i.length;n<t;++n)try{i[n]()}catch(n){}},0))}function t(n){0===c&&(f=n,c=1,l())}function i(n){0===c&&(f=n,c=2,l())}Un(Ci,this,function(t){t.then=function(u,a){return new Ci(function(n,t){var i,r,e,o;i=u,r=a,e=n,o=t,s.push(function(){var n;try{(n=1===c?gi(i)?i(f):f:gi(r)?r(f):f)instanceof Ci?n.then(e,o):(2!==c||gi(r)?e:o)(n)}catch(n){return void o(n)}}),0!==c&&l()})},t.catch=function(n){return t.then(null,n)}}),function(){if(!gi(n))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{n(t,i)}catch(n){i(n)}}()}var Ti=0,_i=[],Ei=[],Ii=[];function xi(){return(new Date).getTime()}Pi.incomplete=function(){return _i},Pi.waitingToStart=function(){return Ei},Pi.prototype.scheduleEvent=function(n,t,i){};function Pi(n,t){var y=0,w=(n||"<unnamed>")+"."+Ti;function g(n){var t=T();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+w+"] "+n)}function S(n){t&&t.warnToConsole("ESPromiseScheduler["+w+"] "+n)}Ti++,Un(Pi,this,function(n){var d=null,p=0;function m(n,t){for(var i=0;i<n.length;i++)if(n[i].id===t)return n.splice(i,1)[0];return null}n.scheduleEvent=function(i,n,u){var e=w+"."+p;p++,n&&(e+="-("+n+")");var t=e+"{"+y+"}";y++;var o,a,r,c={evt:null,tm:xi(),id:t,isRunning:!1,isAborted:!1};return c.evt=d?(o=c,a=d,r=new bi(function(t,i){var n=xi()-a.tm,r=a.id;g("["+e+"] is waiting for ["+r+":"+n+" ms] to complete before starting -- ["+Ei.length+"] waiting and ["+_i.length+"] running"),o.abort=function(n){o.abort=null,m(Ei,e),o.isAborted=!0,i(new Error(n))},a.evt.then(function(n){m(Ei,e),h(o).then(t,i)},function(n){m(Ei,e),h(o).then(t,i)})}),Ei.push(o),r):h(c),(d=c).evt.p=t,c.evt;function f(n){for(var t=xi(),i=t-6e5,r=n.length,e=0;e<r;){var o,u=n[e];u&&u.tm<i?(o=null,u.abort?(o="Aborting ["+u.id+"] due to Excessive runtime ("+(t-u.tm)+" ms)",u.abort(o)):o="Removing ["+u.id+"] due to Excessive runtime ("+(t-u.tm)+" ms)",S(o),n.splice(e,1),r--):e++}}function s(n,t){var i,r=!1,e=m(_i,n);e||(e=m(Ii,n),r=!0),e?(e.to&&(clearTimeout(e.to),e.to=null),i=xi()-e.tm,t?r?S("Timed out event ["+n+"] finally complete -- "+i+" ms"):g("Promise ["+n+"] Complete -- "+i+" ms"):(Ii.push(e),S("Event ["+n+"] Timed out and removed -- "+i+" ms"))):g("Failed to remove ["+n+"] from running queue"),d&&d.id===n&&(d=null),f(_i),f(Ei),f(Ii)}function l(t,i){return function(n){return s(t,!0),i&&i(n),n}}function v(r,e){var o=r.id;return new bi(function(t,i){g("Event ["+o+"] Starting -- waited for "+(r.wTm||"--")+" ms"),r.isRunning=!0,r.abort=function(n){r.abort=null,r.isAborted=!0,s(o,!1),i(new Error(n))};var n=e(o);n instanceof bi?(u&&(r.to=setTimeout(function(){s(o,!1),i(new Error("Timed out after ["+u+"] ms"))},u)),function t(i,n,r,e){n.then(function(n){return n instanceof bi?(g("Event ["+i+"] returned a promise -- waiting"),t(i,n,r,e),n):l(i,r)(n)},l(i,e))}(o,n,function(n){g("Event ["+o+"] Resolving after "+(xi()-r.tm)+" ms"),t(n)},i)):(g("Promise ["+o+"] Auto completed as the start action did not return a promise"),t())})}function h(n){var t=xi();return n.wTm=t-n.tm,n.tm=t,n.isAborted?bi.reject(new Error("["+e+"] was aborted")):(_i.push(n),v(n,i))}}})}var Mi={leftClick:"LClick",rightClick:"RClick",middleClick:"MClick",keyboardEnter:"KEnter",keyboardSpace:"KSpace"},Ai="REAL_TIME",ki=(Fi.create=function(n,t){return new Fi(n,t)},Fi);function Fi(e,n){var o=n?[].concat(n):[],u=on.isNullOrUndefined,t=this;t.iKey=function(){return e},t.count=function(){return o.length},t.events=function(){return o},t.addEvents=function(n,t){return void 0===t&&(t=!0),n&&0<n.length?(o=t?o.concat(n):n.concat(o),n.length):0},t.split=function(n,t){var i,r=new Fi(e);return n<o.length&&(i=o.length-n,u(t)||(i=t<i?t:i),r.addEvents(o.splice(n,i),!0)),r}}var Oi=Math.min(2e6,65e3),Bi="metadata",Ri="f",Di=/\./,Ni=function n(t,i,b,r){var u="baseData",C=!!r,T=i,_={};Un(n,this,function(y){function S(n,p,m,y,w,g){en(n,function(n,t){var i,r,e=null;if(ti(t)){var o,u,a=m,c=n,f=w,s=p;if(C&&!y&&Di.test(n)){var l=n.split("."),v=l.length;if(1<v){f=f&&f.slice();for(var h=0;h<v-1;h++){var d=l[h],s=s[d]=s[d]||{};a+="."+d,f&&f.push(d)}c=l[v-1]}}(e=y&&(void 0===(r=_[i=a])&&(r=!1,0!==i.indexOf("ext.metadata")&&0!==i.indexOf("ext.web")||(r=!0),_[i]=r),r)||!T||!T.handleField(a,c)?ri(c,t,b):T.value(a,c,t,b))&&(o=e.value,s[c]=o,g&&g(f,c,e),Zt(o)&&!Qt(o)&&((u=f)&&(u=u.slice()).push(c),S(t,o,a+"."+c,y,u,g)))}})}y.createPayload=function(n,t,i,r){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],batches:[],numEvents:0,retryCnt:n,isTeardown:t,isSync:i,isBeacon:r}},y.appendPayload=function(d,p,m){var n=d&&p&&!d.overflow;return n&&Zn(t,function(){return"Serializer:appendPayload"},function(){for(var n,t=p.events(),i=d.payloadBlob,r=d.numEvents,e=!1,o=[],u=d.isBeacon,a=u?65e3:3984588,c=u?Oi:2e6,f=0,s=0;f<t.length;){var l=t[f];if(l){if(m<=r){d.overflow=p.split(f);break}var v=y.getEventBlob(l);if(v.length<=c){var h=v.length;if(a<i.length+h){d.overflow=p.split(f);break}i&&(i+="\n"),i+=v,20<++s&&(i.substr(0,1),s=0),e=!0,r++}else o.push(l),t.splice(f,1),f--}f++}o&&0<o.length&&d.sizeExceed.push(ki.create(p.iKey(),o)),e&&(d.batches.push(p),d.payloadBlob=i,d.numEvents=r,n=p.iKey(),-1===on.arrIndexOf(d.apiKeys,n)&&d.apiKeys.push(n))},function(){return{payload:d,theBatch:{iKey:p.iKey(),evts:p.events()},max:m}}),n},y.getEventBlob=function(o){return Zn(t,function(){return"Serializer.getEventBlob"},function(){var n={name:o.name,time:o.time,ver:o.ver,iKey:"o:"+function(n){if(n){var t=n.indexOf("-");if(-1<t)return n.substring(0,t)}return""}(o.iKey)},r={},t=o.ext;t&&(n.ext=r,en(t,function(n,t){S(t,r[n]={},"ext."+n,!0,null,null)}));var i=n.data={baseType:o.baseType},e=i[u]={};return S(o.baseData,e,u,!1,[u],function(n,t,i){ji(r,n,t,i)}),S(o.data,i,"data",!1,[],function(n,t,i){ji(r,n,t,i)}),JSON.stringify(n)},function(){return{item:o}})}})};function ji(n,t,i,r){var e,o,u;r&&n&&(-1<(e=ei(r.value,r.kind,r.propertyType))&&(o=(o=n[Bi])||(n[Bi]={f:{}}),u=(u=o[Ri])||(o[Ri]={}),Vt(t,function(n){u[n]||(u[n]={f:{}});var t=u[n][Ri];u=t=t||(u[n][Ri]={})}),u=u[i]={},Qt(r.value)?u.a={t:e}:u.t=e))}var Li=(Ui.shouldRetryForStatus=function(n){return!(300<=n&&n<500&&408!==n&&429!==n||501===n||505===n)},Ui.getMillisToBackoffForRetry=function(n){var t=Math.floor(1200*Math.random())+2400,i=Math.pow(2,n)*t;return Math.min(i,6e5)},Ui);function Ui(){}var zi,Ki=function n(){var a={};Un(n,this,function(n){n.setKillSwitchTenants=function(n,t){if(n&&t)try{var i=(o=n.split(","),u=[],o&&Vt(o,function(n){u.push($t(n))}),u);if("this-request-only"===t)return i;for(var r=1e3*parseInt(t,10),e=0;e<i.length;++e)a[i[e]]=on.dateNow()+r}catch(n){return[]}var o,u;return[]},n.isTenantKilled=function(n){var t=a,i=$t(n);return void 0!==t[i]&&t[i]>on.dateNow()||(delete t[i],!1)}})},Vi=function n(){var t=!0,i=!0,r=!0,e="use-collector-delta",o=!1;Un(n,this,function(n){n.allowRequestSending=function(){return t},n.firstRequestSent=function(){r&&(r=!1,o||(t=!1))},n.shouldAddClockSkewHeaders=function(){return i},n.getClockSkewHeaderValue=function(){return e},n.setClockSkew=function(n){o||(n?(e=n,o=i=!0):i=!1,t=!0)}})},qi="POST",Hi="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ji="drop",Wi="requeue",Xi="kill-duration",Gi="time-delta-millis",Qi=((zi={})[1]=Wi,zi[100]=Wi,zi[200]="sent",zi[8004]=Ji,zi[8003]=Ji,zi);function Zi(n){try{return n.responseText}catch(n){}return""}var $i,Yi=function n(E,i,I,u){this.y=[];var x,P,M,A="?cors=true&content-type=application/x-json-stream&client-id=NO_AUTH&client-version="+Dt,k=new Ki,F=!1,O=new Vi,B=!1,R=0,D=!0,c=[],N={},j=[],L=null,U=!1;Un(n,this,function(l){var s=!0;function v(n,t){var i=new XDomainRequest;i.open(qi,n.urlString),i.onload=function(){var n=Zi(i);p(t,200,{},n),a(n)},i.onerror=function(){p(t,400,{})},i.ontimeout=function(){p(t,500,{})},i.send(n.data)}function h(n,r){var t;fetch(n.urlString,((t={body:n.data,method:qi,credentials:"include"})[Hi]=!0,t.headers=n.headers,t)).then(function(n){var i={},t="";n.headers&&n.headers.forEach(function(n,t){i[t]=n}),n.body&&n.text().then(function(n){t=n}),p(r,n.status,i,t),a(t)}).catch(function(n){p(r,0,{})})}function d(t,i,n){function r(n,t,i){var r;return n[i]||!t||!t.getResponseHeader||(r=t.getResponseHeader(i))&&(n[i]=$t(r)),n}function e(n){var t={};return t=n.getAllResponseHeaders?function(n){var t,e={};return Jt(n)&&(t=$t(n).split(/[\r\n]+/),Vt(t,function(n){var t,i,r;n&&(-1!==(t=n.indexOf(": "))?(i=$t(n.substring(0,t)).toLowerCase(),r=$t(n.substring(t+1)),e[i]=r):e[$t(n)]=1)})),e}(n.getAllResponseHeaders()):(t=r(t,n,Gi),t=r(t,n,Xi),r(t,n,"kill-duration-seconds"))}function o(n,t){p(i,n.status,e(n),t)}var u=new XMLHttpRequest;try{u[Hi]=!0}catch(n){}s&&(u.withCredentials=!0),u.open(qi,t.urlString,!n),Vt(qt(t.headers),function(n){u.setRequestHeader(n,t.headers[n])}),u.onload=function(){var n=Zi(u);o(u,n),a(n)},u.onerror=function(){o(u)},u.ontimeout=function(){o(u)},u.send(t.data)}function p(n,t,i,r){try{n(t,i,r)}catch(n){x.diagLog().throwInternal(an.WARNING,Rt.SendPostOnCompleteFailure,n)}}function e(){return!F&&R<i}function o(){var n=j;return j=[],n}function m(n,t,i){var r=!1;return n&&0<n.length&&!F&&P&&L&&(r=t||e()&&(0<i||O.allowRequestSending())),r}function y(n){var i={};return n&&Vt(n,function(n,t){i[t]={iKey:n.iKey(),evts:n.events()}}),i}function w(o,u,a,c,f,s){var n;o&&0!==o.length&&(F?_(o,1,c):(n=o,Zn(M,function(){return"HttpManager:_sendBatches"},function(n){n&&(o=o.slice(0));for(var t=[],i=null,r=fi();m(o,c,u);){var e=o.shift();e&&0<e.count()&&(k.isTenantKilled(e.iKey())?t.push(e):(i=i||L.createPayload(u,a,c,s&&g()),L.appendPayload(i,e,E)?null!==i.overflow&&(o=[i.overflow].concat(o),i.overflow=null,b(i,r,fi(),f),r=fi(),i=null):(b(i,r,fi(),f),r=fi(),o=[e].concat(o),i=null)))}i&&b(i,r,fi(),f),0<o.length&&(j=o.concat(j)),_(t,8004,c)},function(){return{batches:y(n),retryCount:u,isTeardown:a,isSynchronous:c,sendReason:f,useSendBeacon:s}},!c)))}function t(n){var t=A,i="";Vt(n.apiKeys,function(n){0<i.length&&(i+=","),i+=n}),0<i.length&&(t+="&apikey="+i),t+="&upload-time="+on.dateNow().toString();var r,e=function(n){for(var t=0;t<n.batches.length;t++)for(var i=n.batches[t].events(),r=0;r<i.length;r++){var e=(i[r].ext||{}).intweb||{};if(ti(e.msfpc))return encodeURIComponent(e.msfpc)}return""}(n);ti(e)&&(t=t+"&ext.intweb.msfpc="+e),O.shouldAddClockSkewHeaders()&&(t+="&time-delta-to-apply-millis="+O.getClockSkewHeaderValue()),!M.getWParam||0<=(r=M.getWParam())&&(t+="&w="+r);for(var o=0;o<c.length;o++)t+="&"+c[o].name+"="+c[o].value;return t}function g(){return!D&&B&&ii()}function S(n,t,i){n[t]=n[t]||{},n[t][x.identifier]=i}function b(o,u,a,c){var n,f,s;o&&o.payloadBlob&&0<o.payloadBlob.length&&(n=t(o),f=fi(),s="sendAttempt",Zn(M,function(){return"HttpManager:_doPayloadSend"},function(){Vt(o.batches,function(n){Vt(n.events(),function(n){var t;U&&(S(t=n.timings=n.timings||{},"sendEventStart",f),S(t,"serializationStart",u),S(t,"serializationCompleted",a)),0<n[s]?n[s]++:n[s]=1})}),_(o.batches,1e3+(c||0),o.isSync,!0);var i={data:o.payloadBlob,urlString:n,headers:N},r=null,e=!!l.sendHook;g()&&o.isBeacon?(e=!1,r=function(n){!function(n,t,i){try{if(ii()){if(q().sendBeacon(n.urlString,n.data))return C(t,200,i,!1);Vt(t.batches,function(n){null.push(n.split(0))}),C(t,200,i,!1),_(null,8003,t.isSync,!0)}}catch(n){x.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+n)}}(n,o,c),l.sendListener&&l.sendListener(i,n,o.isSync||o.isTeardown,!0)}):P&&(r=function(n){function t(n,t){!function(n,t,r,i){var e=9e3,o=null,u=!1,a=!1;try{var c,f,s=!0;if(void 0!==n){if(t&&(O.setClockSkew(t[Gi]),c=t[Xi]||t["kill-duration-seconds"],Vt(k.setKillSwitchTenants(t["kill-tokens"],c),function(i){Vt(r.batches,function(n){var t;n.iKey()===i&&(o=o||[],t=n.split(0),r.numEvents-=t.count(),o.push(t))})})),200===n)return e=200;(!Li.shouldRetryForStatus(n)||r.numEvents<=0)&&(s=!1),e=9e3+n%1e3}s&&(e=100,f=r.retryCnt,r.isSync||(f<I?T(function(){r.isSync||R--,w(r.batches,f+1,r.isTeardown,r.isSync,5,r.isBeacon)},u=!0,Li.getMillisToBackoffForRetry(f)):a=!0))}finally{u||(O.setClockSkew(),C(r,e,i,a)),_(o,8004,r.isSync)}}(n,t,o,c)}O.firstRequestSent();try{P.sendPOST(n,t,o.isTeardown||o.isSync),l.sendListener&&l.sendListener(i,n,o.isSync||o.isTeardown,!1)}catch(n){p(t,0,{})}}),Zn(M,function(){return"HttpManager:_doPayloadSend.sender"},function(){var n,t;r&&(o.isSync||R++,e?(t=!(n={data:i.data,urlString:i.urlString,headers:i.headers}),Zn(M,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{l.sendHook(n,function(n){t=!0,r(n)},o.isSync||o.isTeardown)}catch(n){t||r(i)}})):r(i))})},function(){return{thePayload:o,serializationStart:u,serializationCompleted:a,sendReason:c}},o.isSync)),_(o.sizeExceed,8003,o.isSync)}function C(n,t,i,r){try{r&&x.g(),200===t&&(r||n.isSync||x.S(),function(n){var r;U&&(r=fi(),Vt(n,function(n){var t,i;n&&0<n.count()&&(t=n.events(),i=r,U&&Vt(t,function(n){S(n.timings=n.timings||{},"sendEventCompleted",i)}))}))}(n.batches)),_(n.batches,t,n.isSync,!0)}finally{n.isSync||(R--,5!==i&&l.sendQueuedRequests(i,!n.isSync,n.isBeacon))}}function T(n,t,i){t?n():x.b(n,i)}function a(n){var t=l.y;try{for(var i,r=0;r<t.length;r++)try{t[r](n)}catch(n){x.diagLog().throwInternal(an.CRITICAL,Rt.PostResponseHandler,"Response handler failed: "+n)}!n||ti((i=JSON.parse(n)).webResult)&&ti(i.webResult.msfpc)&&ai("MSFPC",i.webResult.msfpc,365)}catch(n){}}function _(n,t,i,r){var e;n&&0<n.length&&u&&(e=u[function(n){var t=Qi[n];return ti(t)||(t="oth",9e3<=n&&n<=9999?t="rspFail":8e3<=n&&n<=8999?t=Ji:1e3<=n&&n<=1999&&(t="send")),t}(t)])&&Zn(M,function(){return"HttpManager:_sendBatchesNotification"},function(){T(function(){try{e.call(u,n,t,i)}catch(n){x.diagLog().throwInternal(an.CRITICAL,Rt.NotificationException,"send request notification failed: "+n)}},r||i,0)},function(){return{batches:y(n),reason:t,isSync:i,sendSync:r}},!i)}l.initialize=function(n,t,i,r,e){e=e||{},A=n+A,U=!(M=t).config.disableEventTimings;var o=!!M.config.enableCompoundKey;x=i;var u,a,c=e.valueSanitizer,f=e.stringifyObjects;on.isUndefined(e.enableCompoundKey)||(o=!!e.enableCompoundKey),L=new Ni(M,c,f,o),(P=r)||(D=!1,B=!Ht(),(u=H())&&u.protocol&&"file:"===u.protocol.toLowerCase()&&(s=!1),a=null,function(){var n=V("XMLHttpRequest");if(n){var t=new n;return Boolean(Lt(t.withCredentials)&&!0)}}()?a=v:Ht()?a=h:"undefined"!=typeof XMLHttpRequest&&(a=d),P={sendPOST:a})},l.C=function(){return[P,k,L]},l.addQueryStringParameter=function(n,t){for(var i=0;i<c.length;i++)if(c[i].name===n)return void(c[i].value=t);c.push({name:n,value:t})},l.addHeader=function(n,t){N[n]=t},l.canSendRequest=function(){return e()&&O.allowRequestSending()},l.sendQueuedRequests=function(n,t,i){var r=!on.isNullOrUndefined(t)&&!t;m(j,r,0)&&w(o(),0,!1,r,n||0,!!i)},l.isCompletelyIdle=function(){return!F&&0===R&&0===j.length},l.addBatch=function(n){if(n&&0<n.count()){if(k.isTenantKilled(n.iKey()))return!1;j.push(n)}return!0},l.teardown=function(){0<j.length&&w(o(),0,!0,!0,2,!0)},l.pause=function(){F=!0},l.resume=function(){F=!1,l.sendQueuedRequests(4,!1)},l.sendSynchronousBatch=function(n,t,i){n&&0<n.count()&&w([n],0,!1,!0,t||0,!!i)}})},nr=ni?window:void 0,tr="eventsDiscarded",ir="overrideInstrumentationKey",rr=($i=ot,__extends(er,$i),er);function er(){var b,n=$i.call(this)||this;n.identifier="PostChannel",n.priority=1011;var C,T,_,E,I,x=!(n.version="3.0.2"),P=[],M=null,A=!1,k=0,F=1e4,O={},i=Ai,B=null,R=0,D=0,N={},j=-1;return Un(er,n,function(f,s){function o(n,t){if(n.sendAttempt||(n.sendAttempt=0),n.latency||(n.latency=kt),n.ext&&n.ext.trace&&delete n.ext.trace,n.ext&&n.ext.user&&n.ext.user.id&&delete n.ext.user.id,n.sync)if(R||A)n.latency=Ot,n.sync=!1;else if(T)return void T.sendSynchronousBatch(ki.create(n.iKey,[n]),3);var i=!1;k<F?i=!d(n,t):(i=!0,function(n,t){var i=kt;for(;i<=t;){var r=v(n,t,!0);if(r&&0<r.count()){var e=r.split(0,20);if(0<e.count())return g(tr,[e],K),1}i++}return}(n.iKey,n.latency)&&(i=!d(n,t))),i&&w(tr,[n],K)}function r(n,t,i,r){var e=p(n,t,i);return T.sendQueuedRequests(t,i,r),e}function e(){return 0<k}function u(){0<=j&&p(j,I,!0)&&T.sendQueuedRequests(I,!0,!1);var n=O[i][1];!B&&!M&&0<=n&&!A&&(e()?B=a(function(){r(0===D?Ot:kt,1,!(B=null)),D++,D%=2,u()},n):D=0)}function a(n,t){0===t&&R&&(t=1);var i=1e3;return R&&(i=Li.getMillisToBackoffForRetry(R-1)),f.b(n,t*i)}function c(){null!==B&&(f.T(B),B=null,D=0)}function l(n,t){c(),M&&(f.T(M),M=null),A||r(kt,n,t,!0)}function v(n,t,i){var r=N[t],e=(r=r||N[t=kt]).iKeyMap[n];return!e&&i&&(e=ki.create(n),r.batches.push(e),r.iKeyMap[n]=e),e}function h(n,t){T.canSendRequest()&&!R&&(0<_&&_<k&&(t=!0),t&&null==M&&f.flush(n,null,20))}function d(n,t){var i=v(n.iKey,n.latency,!0);return i.addEvents([n],t)&&(k++,t&&0===n.sendAttempt&&h(!n.sync,0<E&&i.count()>=E),1)}function p(r,n,t){var e=!1;return!t||T.canSendRequest()?Zn(f.core,function(){return"PostChannel._queueBatches"},function(){for(var t=[],n=Ot;r<=n;){var i=N[n];i&&i.batches&&(Vt(i.batches,function(n){T.addBatch(n)?e=e||n&&0<n.count():t=t.concat(n.events()),k-=n.count()}),i.batches=[],i.iKeyMap={}),n--}0<t.length&&w(tr,t,z),e&&r<=j&&(j=-1,I=0)},function(){return{latency:r,sendReason:n}},t):(j=0<=j?Math.min(j,r):r,I=Math.max(I,n)),e}function m(n){T.isCompletelyIdle()?n():M=a(function(){m(n)},.25)}function t(){O={REAL_TIME:[2,1],NEAR_REAL_TIME:[6,3],BEST_EFFORT:[18,9]}}function y(t,n){var i=f._||{},r=i[t];if(r)try{r.apply(i,n)}catch(n){f.diagLog().throwInternal(an.CRITICAL,Rt.NotificationException,t+" notification failed: "+n)}}function w(n,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];t&&0<t.length&&y(n,[t].concat(i))}function g(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];n&&0<n.length&&Vt(n,function(n){n&&0<n.count()&&y(t,[n.events()].concat(i))})}function S(){E=b&&b.disableAutoBatchFlushLimit?0:Math.max(1500,F/6)}t(),N[Ot]={batches:[],iKeyMap:{}},N[Ft]={batches:[],iKeyMap:{}},N[kt]={batches:[],iKeyMap:{}},S(),T=new Yi(500,2,1,{requeue:function(n,t){var i=[];Vt(n,function(n){n&&0<n.count()&&Vt(n.events(),function(n){n&&(n.sync&&(n.latency=Ot,n.sync=!1),n.sendAttempt<6?(si(n,f.identifier),o(n,!1)):i.push(n))})}),0<i.length&&w(tr,i,U)},send:function(n,t,i){n&&0<n.length&&y("eventsSendRequest",[1e3<=t&&t<=1999?t-1e3:0,!0!==i])},sent:function(n,t){g("eventsSent",n,t),u()},drop:function(n,t){g(tr,n,8e3<=t&&t<=8999?t-8e3:L)},rspFail:function(n){g(tr,n,U),u()},oth:function(n,t){g(tr,n,L),u()}}),f.C=function(){return[T]},f.initialize=function(u,a,c){Zn(a,function(){return"PostChannel:initialize"},function(){var n=a;s.initialize(u,a,c),f.setInitialized(!1);var t=f.l();u.extensionConfig[f.identifier]=u.extensionConfig[f.identifier]||{},b=t.getExtCfg(f.identifier),f.b=b.setTimeoutOverride?b.setTimeoutOverride:setTimeout.bind(nr),f.T=b.clearTimeoutOverride?b.clearTimeoutOverride:clearTimeout.bind(nr);var i=n.getWParam;n.getWParam=function(){var n=0;return b.ignoreMc1Ms0CookieProcessing&&(n|=2),n|i()},0<b.eventsLimitInMem&&(F=b.eventsLimitInMem),0<b.autoFlushEventsLimit&&(_=b.autoFlushEventsLimit),S(),b.httpXHROverride&&b.httpXHROverride.sendPOST&&(C=b.httpXHROverride),ti(u.anonCookieName)&&T.addQueryStringParameter("anoncknm",u.anonCookieName),T.sendHook=b.payloadPreprocessor,T.sendListener=b.payloadListener;var r,e,o=b.overrideEndpointUrl?b.overrideEndpointUrl:u.endpointUrl;f._=u.extensionConfig.NotificationManager,T.initialize(o,f.core,f,C,b),e=li("beforeunload",r=function(){l(2,!1)}),e=li("unload",r)||e,e=li("pagehide",r)||e,f.setInitialized(!0)},function(){return{coreConfig:u,core:a,extensions:c}})},f.processTelemetry=function(n,t){si(n,f.identifier);var i=(t=f.l(t)).getExtCfg(f.identifier),r=!!b.disableTelemetry;i&&(r=r||!!i.disableTelemetry);var e=n;r||x||(b[ir]&&(e.iKey=b[ir]),i&&i[ir]&&(e.iKey=i[ir]),o(e,!0),u()),f.processNext(e,t)},f.setEventQueueLimits=function(n,t){F=0<n?n:1e4,_=0<t?t:0,S();var i=n<k;if(!i&&0<E)for(var r=kt;!i&&r<=Ot;r++){var e=N[r];e&&e.batches&&Vt(e.batches,function(n){n&&n.count()>=E&&(i=!0)})}h(!0,i)},f.teardown=function(){l(2,!1),x=!0,T.teardown()},f.pause=function(){c(),A=!0,T.pause()},f.resume=function(){A=!1,T.resume(),u()},f.addResponseHandler=function(n){T.y.push(n)},f.I=function(n){c(),t(),i=Ai,u(),en(n,function(n,t){var i;2<=t.length&&(t.splice(0,t.length-2),t[1]<0&&(t[0]=-1),0<t[1]&&0<t[0]&&(i=t[0]/t[1],t[0]=Math.ceil(i)*t[1]),O[n]=t)})},f.flush=function(n,t,i){void 0===n&&(n=!0),A||(c(),i=i||1,n?(p(kt,i,n),null==M?M=a(function(){!function n(t,i){r(kt,i,!0);m(function(){t&&t(),0<P.length?M=a(function(){return n(P.shift(),i)},0):(M=null,e()&&u())})}(t,i)},0):P.push(t)):(r(kt,i,!1),null!=t&&t()))},f.setMsaAuthTicket=function(n){T.addHeader("AuthMsaDeviceTicket",n)},f.hasEvents=e,f.x=function(n){i!==n&&void 0!==O[n]&&(c(),i=n,u())},f.g=function(){R<4&&(R++,c(),u())},f.S=function(){R&&(R=0,c(),u())}}),n}var or=(ur.P="s",ur.M="signal",ur);function ur(){}var ar=(cr.k="v",cr.F="r",cr.O="t",cr.B="k",cr.R="s",cr.D="u",cr.N="h",cr.j="z",cr.L="e",cr);function cr(){}var fr=(sr.U="t",sr.z="u",sr.K="n",sr.V="d",sr.q="v",sr.H="v",sr.J="c",sr.W="z",sr.X="s",sr.G="i",sr);function sr(){}var lr=(vr.Q="d",vr.Z="a",vr.$="u",vr.Y="e",vr.nn="s",vr.tn="t",vr);function vr(){}var hr=(dr.in="p",dr);function dr(){}var pr=(mr.rn="h",mr.en="w",mr.on="g",mr.un="d",mr.an="o",mr.cn="r",mr.fn="s",mr);function mr(){}var yr=(wr.sn="e",wr.ln="o",wr.vn="g",wr.hn="m",wr);function wr(){}var gr=(Sr.dn="c",Sr);function Sr(){}var br=(Cr.G="i",Cr.pn="d",Cr);function Cr(){}var Tr=(_r.mn="new",_r.yn="returning",_r);function _r(){}var Er="",Ir="EISession.Previous",xr="EISession.Id",Pr="_msei",Mr="EIMappings",Ar="ei_sdk_stats",kr=function(n,t){return(kr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)};var Fr,Or,Br,Rr=(kr(Or=Nr,Br=Fr=ot),Or.prototype=null===Br?function(n){var t=Object.create;if(t)return t(n);if(null==n)return{};var i=typeof n;if("object"!=i&&"function"!=i)throw new TypeError("Object prototype may only be an Object:"+n);function r(){}return r.prototype=n,new r}(Br):(Dr.prototype=Br.prototype,new Dr),Nr.prototype.setup=function(n){this.wn=function(n){if(oi()){n+="=";for(var t=decodeURIComponent((I()||{}).cookie||"").split(";"),i=0;i<t.length;i++){for(var r=t[i],e=0;" "===r.charAt(e);)e++;if(0===(r=r.substring(e)).indexOf(n))return r.substring(n.length,r.length)}}return""}(Pr),this.wn||(this.wn=ci(),ai(Pr,this.wn,365),this.gn=!0),this.Sn=n},Nr.prototype.processTelemetry=function(n,t){n.data[or.P][ar.L][fr.W]=this.bn,n.data[or.P][ar.L][fr.X]="Web",n.data[or.P][ar.j]={},n.data[or.P][ar.j][fr.q]="EI-JS-1.0.3",n.data[or.P][ar.N]={},n.data[or.P][ar.N][fr.V]=this.Cn,n.data[or.P][ar.D]={},n.data[or.P][ar.D][lr.Q]=this.Tn.localId||this.wn,n.data[or.P][ar.D][lr.Z]=this.Tn.authId,n.data[or.P][ar.D][lr.$]=this.Tn.authType,n.data[or.P][ar.D][lr.Y]=this.Tn.email,n.data[or.P][ar.D][fr.K]=this.Tn.name,this.Sn._n(n,this.gn,"view"===n.name||"action"===n.name),this.En(n.data),this.In(n.data),this.processNext(n,t)},Nr.prototype.setUser=function(n){this.Tn=n},Nr.prototype.setProperty=function(n,t){this.xn[n]=t},Nr.prototype.En=function(t){var i=this;Vt(qt(this.xn),function(n){ti(t[n])||(t[n]=i.xn[n])})},Nr.prototype.In=function(t){var i=this;Vt(qt(t),function(n){t[n]&&Zt(t[n])&&!on.isDate(t[n])?0===qt(t[n]).length?delete t[n]:i.In(t[n]):ti(t[n])||delete t[n]})},Nr);function Dr(){this.constructor=Or}function Nr(){var n=Fr.call(this)||this;n.Tn={},n.xn={};var t=(new Date).getTimezoneOffset(),i=0<(r=(t-(e=t%60))/60)?"-":"+",r=Math.abs(r),e=Math.abs(e);n.bn=i+(r<10?"0"+r:r.toString())+":"+(e<10?"0"+e:e.toString());var o,u=H();return u&&(o=u.hostname,n.origin=u.origin,o&&(n.Cn="file:"===u.protocol?"local":o)),n}var jr="which",Lr="button",Ur="keyCode",zr=200,Kr="A",Vr="AREA",qr="IMG",Hr={BUTTON:!0,CHECKBOX:!0,RADIO:!0,RESET:!0,SUBMIT:!0};function Jr(n){return{c:n.className,id:n.id,n:function(n){if(!n.tagName)return Er;var t,i=I()||{};switch(n.tagName){case Kr:t=i.all?n.innerText||n.innerHTML:n.text||n.innerHTML;break;case qr:case Vr:t=n.alt;break;default:t=n.value||n.name||n.alt||n.innerText||n.id}return t.substring(0,zr)}(n)}}function Wr(n){var t=Er;switch(n.tagName){case Kr:case Vr:t=n.href;break;case qr:t=function(n){if(n){var t=function(n){return function(n,t,i){var r=n;if(r){for(;!t(r,i);)if(!(r=r.parentNode)||!r.getAttribute)return null;return r}}(n,Xr)}(n);if(1===t.length){if(t[0].href)return t[0].href;if(t[0].src)return t[0].src}}return Er}(n);break;case"INPUT":var i,r=n.type;r&&Hr[r.toUpperCase()]&&(i=H()||{},t=n.form&&n.form.action||i.pathname)}return t}function Xr(n){return n.nodeName===Kr}var Gr={A:!0,BUTTON:!0,AREA:!0,INPUT:!0},Qr=(Zr.prototype.Pn=function(n,t){this.Mn=n;var i,r,e,o=this.An.bind(this);t&&Zt(t)&&(t.view&&(o(),i=E(),r=i.history.replaceState,e=i.history.pushState,i.history.replaceState=function(){r.apply(i.history,arguments),o()},i.history.pushState=function(){e.apply(i.history,arguments),o()}),t.click&&this.kn())},Zr.prototype.Fn=function(){if(Yt&&ni){var n=E(),t=I();return{h:screen.height,w:screen.width,cd:screen.colorDepth,vW:Math.max(t.documentElement.clientWidth,n.innerWidth||0),vH:Math.max(t.documentElement.clientHeight,n.innerHeight||0),sR:screen.height&&screen.width?screen.height+"X"+screen.width:Er}}return null},Zr.prototype.On=function(n){var t=(n=n.replace(/\/$/,"")).split("/");return n=t&&t[t.length-1]!==Er?t[t.length-1]:"/"},Zr.prototype.Bn=function(n){return{uri:n.referrer}},Zr.prototype.Rn=function(){var n,t=this,i=E();I(),i&&i.addEventListener&&(n=-1!==navigator.appVersion.indexOf("MSIE")?"click":"mousedown",i.removeEventListener(n,function(n){t.Dn(n)},!1),i.removeEventListener("keyup",function(n){t.Dn(n)},!1))},Zr.prototype.An=function(){var n,t,i=H();Yt&&i&&(n=I(),t={uri:i.href,title:n.title.substring(0,150),name:this.On(i.pathname||Er),referrer:this.Bn(n)},this.Mn.trackView(t))},Zr.prototype.kn=function(){var n,t=this,i=E();I(),i&&i.addEventListener&&(n=-1!==navigator.appVersion.indexOf("MSIE")?"click":"mousedown",i.addEventListener(n,function(n){t.Dn(n)},!1),i.addEventListener("keyup",function(n){t.Dn(n)},!1))},Zr.prototype.Dn=function(n){for(var t,i,r,e,o,u=n.srcElement||n.target,a=!1;u&&u.tagName;){if(u.control&&Gr[u.control.tagName.toUpperCase()]&&(u=u.control),Gr[u.tagName.toUpperCase()]){a="INPUT"!==u.tagName.toUpperCase()||Hr[u.type.toUpperCase()];break}u=u.parentElement||u.parentNode}if(a){var c=void 0;if(jr in(o=n)?3===o.which:Lr in o&&2===o.button)c=Mi.rightClick;else if(jr in(e=n)?1===e.which:Lr in e&&1===e.button)c=Mi.leftClick;else if(Ur in(r=n)&&13===r.keyCode)c=Mi.keyboardEnter;else if(Ur in(i=n)&&32===i.keyCode)c=Mi.keyboardSpace;else{if(!(jr in(t=n)?2===t.which:Lr in t&&4===t.button))return;c=Mi.middleClick}var f=Jr(u),s={name:f.n,type:c,clickCoordinates:n.pageX+"X"+n.pageY,class:f.c,elementId:f.id,viewTarget:Wr(u)};this.Mn.trackAction(s)}},Zr);function Zr(){}var $r=(Yr.Nn=function(){return(T()||{}).localStorage},Yr.prototype.jn=function(n,t){this.Ln.setItem(n,t)},Yr.prototype.Un=function(n){return this.Ln.getItem(n)},Yr.prototype.zn=function(){this.Ln.removeItem(xr),this.Ln.removeItem(Ir),ai(Pr,"",-1)},Yr);function Yr(n){this.Ln=Yr.Nn(),n&&this.Ln&&this.zn()}var ne=parseInt,te=(ie.prototype._n=function(n,t,i){n.data[or.P][ar.R]={};var r=this.Kn(n.time);i&&(n.latency=Ot,this.Vn(r,n,t),n.data[or.P][ar.D][lr.nn]=this.qn.n?Tr.mn:Tr.yn,n.data[or.P][ar.R][br.pn]=r-this.qn.s),n.data[or.P][ar.R][br.G]=this.Hn(r)?this.qn.i:Er},ie.prototype.Hn=function(n,t){return void 0===t&&(t=!1),t&&(this.qn=this.Jn(this.Wn.Un(xr))),this.qn&&Zt(this.qn)&&n<=this.qn.e},ie.prototype.Vn=function(n,t,i){this.qn=this.Jn(this.Wn.Un(xr)),!this.qn||this.qn.e<n?(i||(t.data[or.P][ar.D][lr.tn]=this.qn?n-this.qn.e:Er),this.qn={i:ci(),s:n,e:n+18e5,m:n+864e5,n:i}):this.qn.e=n+18e5<this.qn.m?n+18e5:this.qn.m,this.Wn.jn(xr,this.Xn(this.qn))},ie.prototype.Jn=function(n){if(!Jt(n))return null;var t=n.split(";"),i={i:t[0],s:ne(t[1],10),e:ne(t[2],10)};return i.m=i.s+864e5,i.n=4===t.length,i},ie.prototype.Xn=function(n){var t=n.i+";"+n.s+";"+n.e;return n.n?t+";"+n.n:t},ie.prototype.Kn=function(n){var t=n.split(/\D+/);return Date.UTC(ne(t[0],10),ne(t[1],10)-1,ne(t[2],10),ne(t[3],10),ne(t[4],10),ne(t[5],10),ne(t[6],10))},ie);function ie(n){this.Wn=n,this.qn=this.Jn(this.Wn.Un(xr))}var re=(ee.prototype.Gn=function(){var n=this;if(this.Qn){for(var t in this.Zn)this.Zn.hasOwnProperty(t)&&this.$n(this.Zn[t],t);this.Zn={},this.Yn=setTimeout(function(){return n.Gn()},6e4)}},ee.prototype.nt=function(){this.Qn&&(this.Gn(),clearTimeout(this.Yn),this.Qn=!1)},ee.prototype.tt=function(n){0!==(n=this.it(n)).length&&this.rt(n,"e_s")},ee.prototype.et=function(n,t){if(0!==(n=this.it(n)).length)switch(this.rt(n,"e_d"),t){case h:this.rt(n,"e_d_ie");break;case z:this.rt(n,"e_d_ks");break;case U:this.rt(n,"e_d_nr");break;case K:this.rt(n,"e_d_qf");break;case d:this.rt(n,"e_d_sle");break;case L:this.rt(n,"e_d_u")}},ee.prototype.rt=function(n,t){for(var i=0,r=n;i<r.length;i++){var e=r[i];this.ot(t,1,e.iKey)}},ee.prototype.ot=function(n,t,i){this.Qn&&(this.Zn[i]||(this.Zn[i]={}),this.Zn[i][n]?this.Zn[i][n]=this.Zn[i][n]+t:this.Zn[i][n]=t)},ee.prototype.it=function(n){for(var t=[],i=0,r=n;i<r.length;i++){var e=r[i];e.name!==Ar&&t.push(e)}return t},ee);function ee(n){var t=this;this.Qn=!1,this.Zn={},this.Qn=!0,this.$n=n,setTimeout(function(){return t.Gn()},6e4)}var oe=decodeURI,ue=(ae.prototype.initialize=function(n){var t,i,u=this;this.ut||(this.ut=!0,this.at=n,this.ct=new pi,this.ft=new rr,t={REAL_TIME:[2,0]},this.ft.I(t),this.st=!!ti(n.userConsent)&&!n.userConsent,this.st=!$r.Nn()||this.st,this.Wn=new $r(this.st),this.st||(this.Sn=new te(this.Wn),this.lt.setup(this.Sn)),(i={instrumentationKey:n.ingestionKey,endpointUrl:n.endpointUrl,disableCookiesUsage:this.st,extensions:[this.lt,this.ft],extensionConfig:[]}).extensionConfig[this.ft.identifier]={ignoreMc1Ms0CookieProcessing:!0},this.vt=new re(function(n,t){var i=!1,r={name:Ar,timestamp:new Date,version:"1.0",ingestionKey:t},e={};for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o].toString(),i=!0);r.properties=e,i&&(r.properties=r.properties||{},u.ht(r.properties),u.dt(r))}),this._=new Tt,this._.addNotificationListener({eventsSent:this.vt.tt.bind(this.vt),eventsDiscarded:this.vt.et.bind(this.vt)}),this.ct.initialize(i,[],null,this._),this.pt.Pn(this,n.autoCapture),this.mt&&this.at.userMapping&&this.yt(this.Tn))},ae.prototype.trackEvent=function(n){n.name!==Ar&&(n.properties=n.properties||{},this.ht(n.properties),this.dt(n))},ae.prototype.trackView=function(n){if(!this.st){if(!n||!Zt(n)||!Jt(n.uri)||0===n.uri.length)throw"View event should have uri";this.wt=n.timestamp||new Date;var t={name:"view",version:"1.0",timestamp:this.wt},i=n.properties||{};this.ht(i),this.Sn.Hn(this.wt.getTime()),this.gt=this.Wn.Un(Ir),this.St(n),this.bt(n,i),this.Ct(i),this.Tt=n,t.properties=i,this.dt(t),this.Wn.jn(Ir,n.uri)}},ae.prototype.trackAction=function(n,t){if(!this.st){if(!this.Tt)throw"Views should be instrumented before actions are sent";if(!ti(n.type))throw"Action event should have type";var i=n.timestamp||new Date;this.Sn.Hn(i.getTime())||(this.Tt.timestamp=i,this.trackView(this.Tt));var r={name:"action",version:"1.0",timestamp:i},e=n.properties||{};this.ht(e),this.bt(this.Tt,e),this.Ct(e),e[or.P][ar.O]={},e[or.P][ar.O][fr.K]=n.name,e[or.P][ar.O][fr.U]=n.type,e[or.P][ar.O][yr.hn]=n.elementId,e[or.P][ar.O][fr.J]=n.class,e[or.P][ar.O][yr.vn]=oe(n.viewTarget),e[or.P][ar.O][yr.sn]=i.getTime()-this.wt.getTime(),n.viewTarget&&this.lt.origin&&(e[or.P][ar.O][yr.ln]=!n.viewTarget.startsWith(this.lt.origin)),e[or.P][ar.B]={},e[or.P][ar.B][gr.dn]=n.clickCoordinates,r.properties=e,this.dt(r)}},ae.prototype.teardown=function(){this.ut&&(this.ft.teardown(),this.ut=!1,this.lt=new Rr,this.pt.Rn(),this.vt.nt())},ae.prototype.setProperty=function(n,t){this._t(n)&&this.lt.setProperty(n,t)},ae.prototype.setUser=function(n){this.lt.setUser(n),this.ut&&this.at.userMapping?this.yt(n):(this.Tn=n,this.mt=!0)},ae.prototype.dt=function(n){var t,i,r;this.ut&&(t={name:n.name,iKey:n.ingestionKey||this.at.ingestionKey},i=n.properties,r=n.timestamp?n.timestamp:new Date,t.time=on.toISOString(r),i[or.P][ar.L]={},i[or.P][ar.L][fr.G]=ci(),on.isNullOrUndefined(n.version)||(i[or.P][ar.L][fr.q]=n.version),t.data=i,this.ct.track(t))},ae.prototype.ht=function(t){var i=this;Vt(qt(t),function(n){i._t(n)||delete t[n]}),t[or.P]={}},ae.prototype._t=function(n){return!((n=n.toLowerCase()).length<3||n.startsWith(this.Et)||n.startsWith(this.It)||n===or.M)},ae.prototype.Ct=function(n){var t=this.pt.Fn();t&&(n[or.P][ar.k][pr.rn]=t.h,n[or.P][ar.k][pr.en]=t.w,n[or.P][ar.k][pr.on]=t.vH,n[or.P][ar.k][pr.un]=t.vW,n[or.P][ar.k][pr.an]=t.cd,n[or.P][ar.k][pr.fn]=t.sR)},ae.prototype.bt=function(n,t){t[or.P][ar.k]={},t[or.P][ar.k][fr.H]=n.title,t[or.P][ar.k][fr.U]="page",t[or.P][ar.k][fr.z]=oe(n.uri),t[or.P][ar.k][fr.K]=oe(n.name),t[or.P][ar.k][fr.J]=n.viewClass,t[or.P][ar.k][pr.cn]=this.gt,n.referrer&&Zt(n.referrer)&&(t[or.P][ar.F]={},t[or.P][ar.F][hr.in]=n.referrer.pageTitle,t[or.P][ar.F][fr.z]=oe(n.referrer.uri))},ae.prototype.St=function(n){var t,i;n.name=n.name||this.pt.On((t=n.uri,(i=document.createElement("a")).href=t,i.pathname)),Yt&&(n.referrer=n.referrer||this.pt.Bn(I()))},ae.prototype.yt=function(n){var t,i,r,e=on.dateNow(),o=n.localId||this.lt.wn;o&&n.authId&&(t=function(n){if(n){var t=0,i=n.length,r=0;if(0<i)for(;r<i;)t=(t<<5)-t+n.charCodeAt(r++)|0;return t}}(o+","+n.authId).toString(),i=JSON.parse(this.Wn.Un(Mr))||{},(!on.hasOwnProperty(i,t)||6048e5<e-parseInt(i[t]))&&(i[t]=e.toString(),this.Wn.jn(Mr,JSON.stringify(i)),r={name:"usermapping",version:"1.0",properties:{}},this.ht(r.properties),this.dt(r)),5<qt(i).length&&this.xt(i))},ae.prototype.xt=function(t){var i="",r=Number.MAX_VALUE;Vt(qt(t),function(n){parseInt(t[n])<r&&(r=parseInt(t[i=n]))}),delete t[i],this.Wn.jn(Mr,JSON.stringify(t))},ae);function ae(){this.lt=new Rr,this.ut=!1,this.pt=new Qr,this.Et=or.P+".",this.It=or.M+"."}if(ni){var ce=E(),fe="MSEIqueue",se=ce[fe];if(Qt(se))for(var le=0;le<se.length;le++){var ve=se[le];"new"===ve[0]?ce[ve[1]]=new ue:ce[ve[1]][ve[0]].apply(ce[ve[1]],ve[2])}delete ce[fe]}n.ActionType=Mi,n.Analytics=ue,function(n,t,i){var r=Object.defineProperty;if(r)try{return r(n,t,i)}catch(n){}n[t]=i.value}(n,"__esModule",{value:!0})});
//# sourceMappingURL=msei-1.0.3.min.js.map
