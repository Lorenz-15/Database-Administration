"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2906],{28446:function(t,n,e){e.d(n,{o:function(){return l}});var r=e(70948),i=e(10988),o=e(97538),a=e(67710);function c(t,n,e){var r="left"===t||"top"===t?-n:n;return"top"===t||"bottom"===t?"translate(".concat(e,",").concat(r,")"):"translate(".concat(r,",").concat(e,")")}function l(t,n){var e=t.ticks?t:function(n){return t(n)+t.bandwidth()/2};return function(t){return"top"===n||"bottom"===n?"translate(".concat(e(t),",0)"):"translate(0,".concat(e(t),")")}}function u(t){switch(t){case"left":return"end";case"top":case"bottom":return"middle";case"right":return"start";default:throw new Error("Unknown position: ".concat(t))}}function s(t){switch(t){case"bottom":return"hanging";case"left":case"right":return"middle";case"top":return"baseline";default:throw new Error("Unknown position: ".concat(t))}}n.Z=(0,o.memo)((function(t){var n,e=t.scale,o=t.position,d=t.tickFormat,f=t.valuesOverride,m=t.alignmentBaselineOverride,p=t.spacing,v=void 0===p?3:p,h=t.crossAxisSpacing,g=void 0===h?0:h,x=t.fill,y=void 0===x?"gray800":x,k=t.tickArguments,b=void 0===k?[]:k,Z=d||(e.tickFormat?e.tickFormat():function(t){return t}),j=l(e,o),w=f||(e.ticks?(n=e).ticks.apply(n,(0,r.Z)(b)):e.domain());return(0,i.jsx)("g",{transform:c(o,v,g),textAnchor:u(o),children:w.map((function(t){return(0,i.jsx)("g",{className:"tick",transform:j(t),children:(0,i.jsx)(a.Z,{as:"text",fontSize:["18px","14px","10px","8px"],lineHeight:1.2,alignmentBaseline:m||s(o),fill:y,children:Z(t)})},"".concat(t))}))})}))},91978:function(t,n,e){var r=e(26604),i=e(64788),o=e(11982),a=e(70948),c=e(10988),l=e(97538),u=e(72618),s=e(21107),d=e(55564),f=e(54006),m=e(62036),p=e(29336),v=e(57682),h=e(98464),g=e(9470),x=e(88691),y=e(71210),k=e(50254),b=e(67710),Z=e(28446),j=e(45614),w=e(36415),C=e(50873),L=e(5537),I=e(11131),T=e(12089);function M(){var t=(0,o.Z)(["\n\t0% {\n\t\ttransform: scale(1.3);\n\t}\n\t50% {\n\t\ttransform: scale(0.5);\n\t}\n\t100% {\n\t\ttransform: scale(1.3);\n\t}\n"]);return M=function(){return t},t}function S(){var t=(0,o.Z)(["\n\t\t--scale: 1.2;\n\n\t\t"," {\n\t\t\t--scale: 1;\n\t\t}\n\n\t\t"," {\n\t\t\t--scale: 0.8;\n\t\t}\n\t"]);return S=function(){return t},t}function B(){var t=(0,o.Z)(["\n\t\t\t.fade {\n\t\t\t\ttransform: scale(var(--scale, 1));\n\t\t\t}\n\t\t"]);return B=function(){return t},t}function A(){var t=(0,o.Z)(["\n\t","\n\n\t.fade {\n\t\ttransform: scale(0);\n\t\ttransition: transform cubic-bezier(0.19, 1, 0.22, 1) 600ms;\n\t}\n\n\t","\n\n\t.primary {\n\t\t&:hover {\n\t\t\t.inner {\n\t\t\t\tanimation-name: ",";\n\t\t\t\tanimation-duration: 1s;\n\t\t\t\tanimation-timing-function: linear;\n\t\t\t\tanimation-iteration-count: infinite;\n\t\t\t}\n\t\t}\n\t}\n\n\t.secondary[data-tooltip-keep-open] {\n\t\tfill: ",";\n\t}\n"]);return A=function(){return t},t}function P(t){var n=t.bike,e=t.showTooltip,r=t.onAddBike,i=t.t;return(0,c.jsxs)(h.Z,{display:"grid",gridTemplateColumns:"50px auto",gridTemplateRows:"repeat(2, auto)",gridColumnGap:4,padding:2,children:[(0,c.jsx)(T.Z,{ratio:9/16,width:50,display:"flex",position:"relative",children:(0,c.jsx)(L.Z,{src:n.primaryThumbnailURL,display:"block",objectFit:"contain",objectPosition:"center center",loading:"lazy",mixBlendMode:"multiply",sx:{width:"100%",height:"100%"}})}),(0,c.jsx)(h.Z,{display:"flex",flexDirection:"column",children:(0,c.jsxs)(h.Z,{className:"notranslate",children:[(0,c.jsx)(x.Z,{ellipsize:!0,textAlign:"left",lineHeight:1.2,children:n.makerId&&n.year&&n.modelId?(0,c.jsx)(I.Z,{makerId:n.makerId,modelId:n.modelId,year:n.year,onClick:function(){return e(null)},children:(0,c.jsx)(y.Z,{variant:"plainLink",children:n.model})}):(0,c.jsx)(c.Fragment,{children:n.model})}),(0,c.jsxs)(x.Z,{textStyle:"c.13",ellipsize:!0,textAlign:"left",children:[n.manufacturer," \xb7 ",n.year," \xb7"," ",(0,c.jsx)(C.F,{displayPrice:n.displayPrice})]})]})}),r&&(0,c.jsx)(h.Z,{gridColumn:"2",children:(0,c.jsxs)(x.Z,{textStyle:"c.13",ellipsize:!0,children:[(0,c.jsx)(I.Z,{makerId:n.makerId,modelId:n.modelId,year:n.year,onClick:function(){return e(null)},children:(0,c.jsx)(y.Z,{children:i("viewBikeTooltipLink")})})," ","\xb7"," ",(0,c.jsx)(k.Z,{variant:"link",onClick:function(){r({id:n.id})},children:i("compareBikeTooltipLink")})]})})]})}n.Z=(0,l.memo)((function(t){var n=t.primaryBikes,e=t.colors,o=t.width,s=void 0===o?800:o,x=t.height,y=void 0===x?300:x,k=t.specContexts,b=t.onAddBike,Z=(0,d.Z)("specs").t,C=function(t){var n=(0,l.useState)(!1),e=n[0],r=n[1],i=(0,l.useState)(!1),o=i[0],a=i[1],c=(0,l.useCallback)((function(){r(!0)}),[]);return(0,l.useEffect)((function(){e&&t&&a(!0)}),[e,t]),{handleVisible:c,reveal:o}}(k),L=C.handleVisible,I=C.reveal,T=20,M=40,S=s-M-20,B=y-T-20,A=(0,w.En)(),O=(0,j.u)(),F=!!A.currency,N=(0,l.useMemo)((function(){var t,o,c=n.map((function(t,n){return{bike:t,i:n}})).reverse().filter((function(t){var n,e,r=t.bike;return(null===r||void 0===r?void 0:r.msrp)&&(null===r||void 0===r||null===(n=r.analysis)||void 0===n||null===(e=n.specLevel)||void 0===e?void 0:e.value)})),l=(t=Math).max.apply(t,(0,a.Z)(c.map((function(t){var n,e,r=t.bike;return null===r||void 0===r||null===(n=r.analysis)||void 0===n||null===(e=n.specLevel)||void 0===e?void 0:e.value}))).concat((0,a.Z)(null!==(o=null===k||void 0===k?void 0:k.map((function(t){return t.specLevel})))&&void 0!==o?o:[]))),u=function(t){return(F?t.displayPrice?O(t.displayPrice):(n=t.msrp,O({amount:n,currency:"USD"})):{value:{currency:"USD",amount:t.msrp}}).value.amount;var n},s=c.map((function(t){var n=t.bike,r=t.i,i=u(n);return{id:n.id,item:n,color:e[r%e.length],price:i,specLevel:n.analysis.specLevel.value}})).filter((function(t){return t.price})),d=(null!==k&&void 0!==k?k:[]).map((function(t){var n=u(t);return{id:t.id,item:t,price:n,specLevel:t.specLevel}})),m=function(t,n){var e=t.map((function(t){return t.price})).filter((function(t){return t})),r=n.map((function(t){return t.price})).filter((function(t){return t})),i=function(t,n){var e,r;return Math.min(Math.ceil(((e=Math).max.apply(e,(0,a.Z)(t.filter((function(t){return t}))))+K)/K)*K,(r=Math).max.apply(r,(0,a.Z)(t.filter((function(t){return t}))).concat((0,a.Z)((n||[]).filter((function(t){return t}))))))}(e,r);return{minPrice:z(e,r),maxPrice:i}}(s,d),p=m.minPrice,v=m.maxPrice,h=(0,f.Z)().domain([p,v]).rangeRound([0,S]),g=(0,f.Z)().domain([1,l]).rangeRound([B,0]),x=(d||[]).filter((function(t){var n=t.price;return n<=v&&n>=p})),y=function(t){var n=new Map,e=!0,r=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(e=(o=c.next()).done);e=!0){var l,u=o.value,s="".concat(Math.round(u.price),":").concat(u.specLevel),d=(null!==(l=n.get(s))&&void 0!==l?l:{count:0}).count;n.set(s,{count:d+1,item:u})}}catch(f){r=!0,i=f}finally{try{e||null==c.return||c.return()}finally{if(r)throw i}}return(0,a.Z)(n.values())}(x).map((function(t){var n=t.count,e=t.item;return(0,r.Z)({count:n,cx:h(e.price),cy:g(e.specLevel)},e)})),b=s.map((function(t){return(0,i.Z)((0,r.Z)({},t),{cx:h(t.price),cy:g(t.specLevel)})})).reduce((function(t,n){var e=t.findIndex((function(t){var e=t.cx,r=t.cy;return Math.abs(n.cx-e)<=6&&Math.abs(n.cy-r)<=6}));if(-1===e)return(0,a.Z)(t).concat([{cx:n.cx,cy:n.cy,entries:[n]}]);var r=t[e].entries;return(0,a.Z)(t.slice(0,e)).concat([{cx:r.reduce((function(t,n){return t+n.cx}),0)/r.length,cy:r.reduce((function(t,n){return t+n.cy}),0)/r.length,entries:(0,a.Z)(r).concat([n])}],(0,a.Z)(t.slice(e+1)))}),[]).map((function(t,n){return(0,i.Z)((0,r.Z)({},t),{id:n})}));return{primaryDots:b,clusteredSecondaryPoints:y,x:h}}),[F,O,e,B,S,n,k]),R=N.primaryDots,E=N.clusteredSecondaryPoints,H=N.x,U=function(t,n){var e,r=(0,l.useState)(null),i=r[0],o=r[1],a=(0,l.useCallback)((function(t,n){var e=!0,r=!1,i=void 0;try{for(var a,c=document.querySelectorAll("circle[data-tooltip-keep-open]")[Symbol.iterator]();!(e=(a=c.next()).done);e=!0)delete a.value.dataset.tooltipKeepOpen}catch(l){r=!0,i=l}finally{try{e||null==c.return||c.return()}finally{if(r)throw i}}n&&(n.dataset.tooltipKeepOpen=!0),o(t)}),[]),c=(0,l.useMemo)((function(){return null===i||void 0===i?void 0:i.id.split(",").reverse().map((function(r){return null!==(e=t.flatMap((function(t){return t.entries})).find((function(t){return t.id===r})))&&void 0!==e?e:n.find((function(t){return t.id===r}))}))}),[null===i||void 0===i?void 0:i.id,t,n]);return{showTooltip:a,bikeTooltipInfo:i,tooltipBikes:c}}(R,E),Y=U.showTooltip,V=U.bikeTooltipInfo,_=U.tooltipBikes,Q=(0,l.useRef)(null),G=(0,l.useCallback)((function(t){if("circle"===t.target.tagName&&t.target.dataset.bikeId){var n=t.target.getBoundingClientRect(),e=n.top,r=n.left,i=n.bottom,o=n.right;clearTimeout(Q.current),Y({id:t.target.dataset.bikeId,top:e,left:r,width:Math.ceil(o-r),height:Math.ceil(i-e)},t.target)}"DIV"===t.target.tagName&&t.target.dataset.bikeTooltipKeepOpen&&clearTimeout(Q.current)}),[Y]),W=(0,l.useCallback)((function(t){"circle"===t.target.tagName&&t.target.dataset.bikeId===(null===V||void 0===V?void 0:V.id)&&(clearTimeout(Q.current),Q.current=setTimeout((function(){Y(null)}),200)),"DIV"===t.target.tagName&&t.target.dataset.bikeTooltipKeepOpen&&(clearTimeout(Q.current),Q.current=setTimeout((function(){Y(null)}),200))}),[Y,null===V||void 0===V?void 0:V.id]),q=(0,p.YF)({placement:"top-end",middleware:[(0,v.cv)(4),(0,v.RR)(),(0,v.uY)({padding:10})]}),J=q.x,X=q.y,$=q.reference,tt=q.floating,nt=q.strategy;return function(t,n){(0,u.Z)((function(){t?n({getBoundingClientRect:function(){var n=t.top,e=t.left,r=t.width,i=t.height;return{width:r,height:i,x:e,y:n,top:n,left:e,right:e+r,bottom:n+i}}}):n()}),[t,n])}(V,$),(0,c.jsx)(m.h,{bottomOffset:100,onEnter:L,children:(0,c.jsxs)(h.Z,{position:"relative",onMouseOver:G,onMouseOut:W,children:[(0,c.jsx)(D,{width:s,height:y,reveal:I,primaryDots:R,clusteredSecondaryPoints:E,marginLeft:M,marginTop:T,innerHeight:B,x:H,region:A,canConvert:F,yAxisLabel:Z("specLevelYAxisLabel")}),_&&(0,c.jsx)(h.Z,{ref:tt,backgroundColor:"white",border:1,borderColor:"gray50",boxShadow:4,paddingX:3,paddingY:2,maxWidth:"90vw",maxHeight:"240px",overflowY:"auto",style:{position:nt,top:null!==X&&void 0!==X?X:"",left:null!==J&&void 0!==J?J:""},onMouseEnter:function(){clearTimeout(Q.current)},onMouseLeave:function(){clearTimeout(Q.current),Q.current=setTimeout((function(){Y(null)}),200)},children:(0,c.jsx)(g.Z,{spacing:3,children:_.map((function(t){return(0,c.jsx)(P,{bike:t.item,showTooltip:Y,onAddBike:b,t:Z},t.id)}))})})]})})}));var D=(0,l.memo)((function(t){var n=t.width,e=t.height,r=t.reveal,i=t.primaryDots,o=t.clusteredSecondaryPoints,a=t.marginLeft,u=t.marginTop,s=t.innerHeight,d=t.x,f=t.region,m=t.canConvert,p=t.yAxisLabel;return(0,c.jsxs)(R,{width:"100%",viewBox:"0 0 ".concat(n," ").concat(e),reveal:r,children:[(0,c.jsx)("defs",{children:i.filter((function(t){return t.entries.length>1})).map((function(t){return(0,c.jsx)("linearGradient",{id:"gradient".concat(t.id),x1:"1",y1:"1",x2:"0",y2:"0",children:t.entries.map((function(n,e){return(0,c.jsxs)(l.Fragment,{children:[(0,c.jsx)("stop",{offset:"".concat(e/t.entries.length*79+10,"%"),stopColor:n.color}),(0,c.jsx)("stop",{offset:"".concat((e+1)/t.entries.length*79+10,"%"),stopColor:n.color})]},n.id)}))},"gradient".concat(t.id))}))}),(0,c.jsxs)("g",{transform:"translate(".concat(a,",").concat(u,")"),children:[(0,c.jsx)("g",{transform:"translate(-20,".concat(s/2,")"),children:(0,c.jsx)(b.Z,{as:"text",alignmentBaseline:"baseline",textAnchor:"middle",transform:"rotate(-90)",fill:"gray800",fontSize:["18px","14px","10px","8px"],lineHeight:1.2,children:p})}),(0,c.jsx)("g",{transform:"translate(0,".concat(s,")"),children:(0,c.jsx)(Z.Z,{position:"bottom",scale:d,spacing:"0",fill:"gray800",tickArguments:[Math.floor(n/100)],tickFormat:function(t){return t.toLocaleString(f.formatLocale,{style:"currency",currency:m&&f.currency.base||"USD",minimumFractionDigits:0,maximumFractionDigits:0})}})}),o.map((function(t){return(0,c.jsx)(F,{dot:t},t.id)})),i.map((function(t){return(0,c.jsx)(O,{dot:t},t.id)}))]})]})}));function O(t){var n=t.dot;return(0,c.jsxs)(h.Z,{as:"g",className:"primary",children:[(0,c.jsx)(h.Z,{as:"circle",fill:1===n.entries.length?n.entries[0].color:"url(#gradient".concat(n.id,")"),r:1===n.entries.length?4:6,cx:n.cx,cy:n.cy,style:{transformOrigin:"".concat(n.cx,"px ").concat(n.cy,"px")},className:"inner"}),(0,c.jsx)(h.Z,{as:"circle","data-bike-id":n.entries.map((function(t){return t.id})).join(","),stroke:1===n.entries.length?n.entries[0].color:"url(#gradient".concat(n.id,")"),strokeWidth:"1.5",strokeOpacity:"0.7",fill:"transparent",r:1===n.entries.length?6:8,cx:n.cx,cy:n.cy})]})}function F(t){var n=t.dot,e=n.cx,r=n.cy,i=n.price,o=n.specLevel,a=n.count,l=n.item,u=l.id,s=l.label,d=l.makerId,f=l.modelId,m=l.year;return(0,c.jsx)(h.Z,{as:"circle","data-bike-id":u,label:s,year:m,makerId:d,modelId:f,tabIndex:-1,className:"fade secondary",fill:"hsla(0, 0%, 67%, ".concat(H(a),")"),style:E(i,o,e,r),r:"3",cx:e,cy:r})}var N=(0,s.F4)(M()),R=s.ZP.svg.withConfig({componentId:"sc-c765c7e7-0"})(A(),(function(t){var n=t.theme;return(0,s.iv)(S(),n.mediaQueries.phone,n.mediaQueries.tablet)}),(function(t){return t.reveal&&(0,s.iv)(B())}),N,(function(t){return t.theme.colors.warm900}));function E(t,n,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.9*e+10*(t+n)%1e3;return{transformOrigin:"".concat(e,"px ").concat(r,"px"),transitionDelay:"".concat(i,"ms")}}function H(t){for(var n=0,e=0;e<t;e++)n=.3*(1-n)+n;return n}var K=500;function z(t,n){var e;return(null===n||void 0===n?void 0:n.length)?500*Math.floor((e=Math).min.apply(e,(0,a.Z)(n.filter((function(t){return t}))))/500):0}},13951:function(t,n,e){e.d(n,{LH:function(){return l}});var r=e(26604),i=e(64788),o=e(70948),a=e(95841),c=e(36415);function l(t,n){var e=n.primaryBikes,l=n.getContextColor,u=(0,c.En)(),s=function(t,n){var e,i=t.filter((function(t){var n;return(null===t||void 0===t||null===(n=t.subcategories)||void 0===n?void 0:n.length)&&t.buildKind})).map((function(t){var r;return{subcategory:t.subcategories[0],buildKind:t.buildKind,suspensionKind:null!==(e=null===(r=t.suspension)||void 0===r?void 0:r.configuration)&&void 0!==e?e:null,region:n}})),a=new Map,c=!0,l=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(c=(s=d.next()).done);c=!0){var f=s.value,m=JSON.stringify(f);a.has(m)||a.set(m,{count:0,key:f}),a.get(m).count++}}catch(v){l=!0,u=v}finally{try{c||null==d.return||d.return()}finally{if(l)throw u}}var p=(0,o.Z)(a.entries()).sort((function(t,n){return n[1].count-t[1].count}))[0][1].key;return(0,r.Z)({},p)}(e,u.region);return function(t){var n,e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getContextColor;return null===t||void 0===t||null===(n=t.subcategory)||void 0===n?void 0:n.items.filter((function(t){return t})).map((function(t){return(0,i.Z)((0,r.Z)({},t),{label:"".concat(t.manufacturer," ").concat(t.model),fill:null===e||void 0===e?void 0:e(t)})}))}(a.LH.withQueryConfig({enabled:!(!u.isReady||!t)})(s).data,{getContextColor:l})}}}]);